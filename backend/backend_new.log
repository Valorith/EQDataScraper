2025-07-22 22:07:44,256 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:07:44,257 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:07:44,257 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:07:44,257 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:07:44,257 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:07:44,257 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:07:44,257 - INFO - Using file system for cache storage
2025-07-22 22:07:44,258 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:07:44,259 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:07:44,259 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:07:44,259 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:07:44,259 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:07:44,259 - INFO - Directory permissions: 0o40755
2025-07-22 22:07:44,259 - INFO - Directory writable: True
2025-07-22 22:07:44,259 - INFO - Getting database configuration...
2025-07-22 22:07:44,259 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:44,259 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:44,259 - INFO - Using persistent storage configuration
2025-07-22 22:07:44,259 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:07:44,259 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:07:44,259 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:07:44,259 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:07:44,259 - INFO - Database config manager initialized
2025-07-22 22:07:44,261 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:07:44,261 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:07:44,261 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:07:44,261 - INFO - Getting database configuration...
2025-07-22 22:07:44,261 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:44,261 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:44,261 - INFO - Using persistent storage configuration
2025-07-22 22:07:44,261 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:07:44,261 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:07:44,261 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:07:44,261 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:07:44,261 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:07:44,262 - INFO - Getting database configuration...
2025-07-22 22:07:44,262 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:44,262 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:44,262 - INFO - Using persistent storage configuration
2025-07-22 22:07:44,262 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:44,262 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:44,262 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:07:44,263 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:07:44,263 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:07:44,263 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:07:44,263 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:07:44,263 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:07:44,263 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:07:44,309 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:07:44,309 - INFO - Attempting MySQL connection...
2025-07-22 22:07:44,309 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:07:44,484 - INFO - MySQL connection successful!
2025-07-22 22:07:44,527 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:07:44,527 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:07:46,530 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:07:46,531 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:07:46,531 - INFO - Getting database configuration...
2025-07-22 22:07:46,531 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:46,531 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:46,531 - INFO - Using persistent storage configuration
2025-07-22 22:07:46,532 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:46,532 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:46,532 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:07:46,532 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:07:46,532 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:07:46,532 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:07:46,532 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:07:46,532 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:07:46,532 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:07:46,577 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:07:46,577 - INFO - Attempting MySQL connection...
2025-07-22 22:07:46,577 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:07:46,748 - INFO - MySQL connection successful!
2025-07-22 22:07:46,791 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:07:46,792 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:07:50,797 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:07:50,798 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:07:50,798 - INFO - Getting database configuration...
2025-07-22 22:07:50,798 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:50,798 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:50,798 - INFO - Using persistent storage configuration
2025-07-22 22:07:50,798 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:50,798 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:50,798 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:07:50,798 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:07:50,798 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:07:50,798 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:07:50,798 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:07:50,798 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:07:50,798 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:07:50,850 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:07:50,850 - INFO - Attempting MySQL connection...
2025-07-22 22:07:50,851 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:07:51,021 - INFO - MySQL connection successful!
2025-07-22 22:07:51,063 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:07:51,063 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:07:51,063 - INFO - Getting database configuration...
2025-07-22 22:07:51,064 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:51,064 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:51,064 - INFO - Using persistent storage configuration
2025-07-22 22:07:51,064 - INFO - Initializing content database...
2025-07-22 22:07:51,064 - INFO - Initializing content database connection...
2025-07-22 22:07:51,064 - INFO - Attempting to establish database connection...
2025-07-22 22:07:51,064 - INFO - Getting database configuration...
2025-07-22 22:07:51,064 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:51,064 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:51,064 - INFO - Using persistent storage configuration
2025-07-22 22:07:51,064 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:51,065 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:51,065 - INFO - Database configuration loaded successfully
2025-07-22 22:07:51,065 - INFO - ✅ Content database initialized successfully
2025-07-22 22:07:51,065 - INFO - ✅ Content database initialized successfully
2025-07-22 22:07:51,065 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:07:51,065 - INFO - ✅ Server startup complete
2025-07-22 22:07:51,067 - INFO - Starting Flask server on port 5001 with threading enabled
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
 * Serving Flask app 'app'
 * Debug mode: on
2025-07-22 22:07:51,105 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.40.2:5001
2025-07-22 22:07:51,105 - INFO - [33mPress CTRL+C to quit[0m
2025-07-22 22:07:51,105 - INFO -  * Restarting with stat
2025-07-22 22:07:51,290 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:07:51,290 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:07:51,291 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:07:51,291 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:07:51,291 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:07:51,291 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:07:51,291 - INFO - Using file system for cache storage
2025-07-22 22:07:51,292 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:07:51,292 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:07:51,292 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:07:51,293 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:07:51,293 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:07:51,293 - INFO - Directory permissions: 0o40755
2025-07-22 22:07:51,293 - INFO - Directory writable: True
2025-07-22 22:07:51,293 - INFO - Getting database configuration...
2025-07-22 22:07:51,293 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:51,293 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:51,293 - INFO - Using persistent storage configuration
2025-07-22 22:07:51,293 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:07:51,293 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:07:51,293 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:07:51,293 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:07:51,293 - INFO - Database config manager initialized
2025-07-22 22:07:51,295 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:07:51,295 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:07:51,295 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:07:51,295 - INFO - Getting database configuration...
2025-07-22 22:07:51,295 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:51,295 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:51,295 - INFO - Using persistent storage configuration
2025-07-22 22:07:51,295 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:07:51,295 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:07:51,295 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:07:51,295 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:07:51,295 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:07:51,295 - INFO - Getting database configuration...
2025-07-22 22:07:51,295 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:51,295 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:51,295 - INFO - Using persistent storage configuration
2025-07-22 22:07:51,295 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:51,295 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:51,295 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:07:51,296 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:07:51,296 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:07:51,296 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:07:51,296 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:07:51,296 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:07:51,296 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:07:51,341 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:07:51,341 - INFO - Attempting MySQL connection...
2025-07-22 22:07:51,341 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:07:51,511 - INFO - MySQL connection successful!
2025-07-22 22:07:51,553 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:07:51,553 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:07:53,554 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:07:53,554 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:07:53,554 - INFO - Getting database configuration...
2025-07-22 22:07:53,555 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:53,555 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:53,555 - INFO - Using persistent storage configuration
2025-07-22 22:07:53,555 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:53,555 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:53,555 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:07:53,556 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:07:53,556 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:07:53,556 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:07:53,556 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:07:53,556 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:07:53,556 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:07:53,601 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:07:53,601 - INFO - Attempting MySQL connection...
2025-07-22 22:07:53,601 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:07:53,777 - INFO - MySQL connection successful!
2025-07-22 22:07:53,820 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:07:53,820 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:07:57,821 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:07:57,821 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:07:57,821 - INFO - Getting database configuration...
2025-07-22 22:07:57,821 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:57,821 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:57,822 - INFO - Using persistent storage configuration
2025-07-22 22:07:57,822 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:57,822 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:57,822 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:07:57,822 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:07:57,822 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:07:57,822 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:07:57,822 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:07:57,822 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:07:57,822 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:07:57,867 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:07:57,867 - INFO - Attempting MySQL connection...
2025-07-22 22:07:57,867 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:07:58,037 - INFO - MySQL connection successful!
2025-07-22 22:07:58,080 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:07:58,080 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:07:58,080 - INFO - Getting database configuration...
2025-07-22 22:07:58,080 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:58,080 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:58,080 - INFO - Using persistent storage configuration
2025-07-22 22:07:58,080 - INFO - Initializing content database...
2025-07-22 22:07:58,080 - INFO - Initializing content database connection...
2025-07-22 22:07:58,080 - INFO - Attempting to establish database connection...
2025-07-22 22:07:58,080 - INFO - Getting database configuration...
2025-07-22 22:07:58,080 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:07:58,080 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:07:58,080 - INFO - Using persistent storage configuration
2025-07-22 22:07:58,080 - INFO - Loading database config from: persistent_storage
2025-07-22 22:07:58,080 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:07:58,080 - INFO - Database configuration loaded successfully
2025-07-22 22:07:58,080 - INFO - ✅ Content database initialized successfully
2025-07-22 22:07:58,081 - INFO - ✅ Content database initialized successfully
2025-07-22 22:07:58,081 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:07:58,081 - INFO - ✅ Server startup complete
2025-07-22 22:07:58,082 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:07:58,112 - WARNING -  * Debugger is active!
2025-07-22 22:07:58,119 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:07:58,162 - INFO - 127.0.0.1 - - [22/Jul/2025 22:07:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:07:58,163 - INFO - 127.0.0.1 - - [22/Jul/2025 22:07:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:07:58,165 - INFO - 127.0.0.1 - - [22/Jul/2025 22:07:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:07:58,866 - INFO - 127.0.0.1 - - [22/Jul/2025 22:07:58] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:08:00,375] INFO in app: ✅ Character routes registered
2025-07-22 22:08:00,375 - INFO - ✅ Character routes registered
[2025-07-22 22:08:00,376] INFO in app: 🔧 Debug OAuth endpoints enabled
2025-07-22 22:08:00,376 - INFO - 🔧 Debug OAuth endpoints enabled
[2025-07-22 22:08:00,376] INFO in app: 🔧 Enhanced OAuth troubleshooting enabled
2025-07-22 22:08:00,376 - INFO - 🔧 Enhanced OAuth troubleshooting enabled
[2025-07-22 22:08:00,376] INFO in app: 🔧 OAuth production fix endpoints enabled
2025-07-22 22:08:00,376 - INFO - 🔧 OAuth production fix endpoints enabled
[2025-07-22 22:08:00,376] INFO in app: ✅ OAuth user accounts enabled
2025-07-22 22:08:00,376 - INFO - ✅ OAuth user accounts enabled
[2025-07-22 22:08:00,376] INFO in app: Running in LOCAL DEVELOPMENT environment
2025-07-22 22:08:00,376 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:08:00,376 - INFO - Running in LOCAL DEVELOPMENT environment
[2025-07-22 22:08:00,376] INFO in app: Configuring database for OAuth from DATABASE_URL
2025-07-22 22:08:00,376 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:08:00,376 - INFO - Configuring database for OAuth from DATABASE_URL
[2025-07-22 22:08:00,376] INFO in app: DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:08:00,376 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:08:00,376 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
[2025-07-22 22:08:00,376] INFO in app: Using PostgreSQL database for user accounts
2025-07-22 22:08:00,376 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:08:00,376 - INFO - Using PostgreSQL database for user accounts
[2025-07-22 22:08:00,377] INFO in app: DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:08:00,377 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:08:00,377 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
[2025-07-22 22:08:00,377] INFO in app: OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:08:00,377 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:08:00,377 - INFO - OAuth is enabled but no DATABASE_URL is set
[2025-07-22 22:08:00,377] INFO in app: Using file system for cache storage
2025-07-22 22:08:00,377 - INFO - Using file system for cache storage
2025-07-22 22:08:00,377 - INFO - Using file system for cache storage
2025-07-22 22:08:00,379 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:08:00,379 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:08:00,379 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:00,379 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:00,379 - INFO - Getting database configuration...
2025-07-22 22:08:00,379 - INFO - Getting database configuration...
2025-07-22 22:08:00,379 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:00,379 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:00,379 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:00,379 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:00,379 - INFO - Using persistent storage configuration
2025-07-22 22:08:00,379 - INFO - Using persistent storage configuration
2025-07-22 22:08:00,379 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:00,379 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:00,379 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:00,379 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:00,379 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:00,379 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:00,379 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:00,379 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
[2025-07-22 22:08:00,379] INFO in app: Database config manager initialized
2025-07-22 22:08:00,379 - INFO - Database config manager initialized
2025-07-22 22:08:00,379 - INFO - Database config manager initialized
2025-07-22 22:08:00,382 - INFO - Getting database configuration...
2025-07-22 22:08:00,382 - INFO - Getting database configuration...
2025-07-22 22:08:00,382 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:00,382 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:00,382 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:00,382 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:00,382 - INFO - Using persistent storage configuration
2025-07-22 22:08:00,382 - INFO - Using persistent storage configuration
2025-07-22 22:08:00,382 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:00,382 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:00,382 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:00,382 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:00,382 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:00,382 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:00,382 - INFO - Getting database configuration...
2025-07-22 22:08:00,382 - INFO - Getting database configuration...
2025-07-22 22:08:00,382 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:00,382 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:00,383 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:00,383 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:00,383 - INFO - Using persistent storage configuration
2025-07-22 22:08:00,383 - INFO - Using persistent storage configuration
2025-07-22 22:08:00,383 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:00,383 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:00,383 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:00,383 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:00,383 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:00,383 - INFO - Database configuration loaded from persistent storage
[2025-07-22 22:08:00,383] INFO in app: Database configuration changed, closing connection pool
2025-07-22 22:08:00,383 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:08:00,383 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:08:00,383 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:00,383 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:00,383 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:00,383 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:00,383 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:00,383 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:00,383 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:00,383 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:00,383 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:00,383 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:00,383 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:00,383 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:00,383 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:00,383 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:00,428 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:00,428 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:00,428 - INFO - Attempting MySQL connection...
2025-07-22 22:08:00,428 - INFO - Attempting MySQL connection...
2025-07-22 22:08:00,428 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:00,428 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:00,599 - INFO - MySQL connection successful!
2025-07-22 22:08:00,599 - INFO - MySQL connection successful!
2025-07-22 22:08:00,600 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:08:00,600 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:08:00,600 - INFO - Stats request for character 2453
2025-07-22 22:08:00,600 - INFO - Stats request for character 2453
2025-07-22 22:08:00,643 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:08:00,643 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:08:00,643 - ERROR - Database query failed: (1054, "Unknown column 'ac' in 'field list'")
2025-07-22 22:08:00,643 - ERROR - Database query failed: (1054, "Unknown column 'ac' in 'field list'")
2025-07-22 22:08:00,643 - ERROR - Error getting stats for character 2453: (1054, "Unknown column 'ac' in 'field list'")
2025-07-22 22:08:00,643 - ERROR - Error getting stats for character 2453: (1054, "Unknown column 'ac' in 'field list'")
2025-07-22 22:08:00,654 - ERROR - Full traceback: Traceback (most recent call last):
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py", line 658, in get_character_stats
    cursor.execute(char_query, (character_id,))
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/utils/query_tracker.py", line 25, in execute
    result = self.cursor.execute(query, params)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'ac' in 'field list'")

2025-07-22 22:08:00,654 - ERROR - Full traceback: Traceback (most recent call last):
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py", line 658, in get_character_stats
    cursor.execute(char_query, (character_id,))
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/utils/query_tracker.py", line 25, in execute
    result = self.cursor.execute(query, params)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'ac' in 'field list'")

2025-07-22 22:08:00,654 - ERROR - 📤 API Response: GET /api/characters/2453/stats → 500 | IP: 127.0.0.1
2025-07-22 22:08:00,654 - ERROR - 📤 API Response: GET /api/characters/2453/stats → 500 | IP: 127.0.0.1
2025-07-22 22:08:00,654 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 292.1450138092041ms - Error: None
2025-07-22 22:08:00,654 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 292.1450138092041ms - Error: None
2025-07-22 22:08:00,655 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 292.1450138092041ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:08:00,655 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 292.1450138092041ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:08:00,655 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:00] "[35m[1mGET /api/characters/2453/stats HTTP/1.1[0m" 500 -
2025-07-22 22:08:00,655 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:00] "[35m[1mGET /api/characters/2453/stats HTTP/1.1[0m" 500 -
2025-07-22 22:08:01,863 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:01] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:08:01,863 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:01] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:08:28,170 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:08:28,170 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:08:32,863 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:08:32,863 - INFO - 127.0.0.1 - - [22/Jul/2025 22:08:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:08:38,189 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
2025-07-22 22:08:38,189 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:08:38,192 - INFO - Cleaning up resources...
2025-07-22 22:08:38,192 - INFO - Cleaning up resources...
2025-07-22 22:08:38,192 - INFO - HTTP session closed
2025-07-22 22:08:38,192 - INFO - HTTP session closed
2025-07-22 22:08:38,192 - INFO - Connection pool closed
2025-07-22 22:08:38,192 - INFO - Connection pool closed
2025-07-22 22:08:38,192 - INFO - Content database connections closed
2025-07-22 22:08:38,192 - INFO - Content database connections closed
2025-07-22 22:08:38,204 - INFO - Garbage collection completed
2025-07-22 22:08:38,204 - INFO - Garbage collection completed
2025-07-22 22:08:38,205 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:08:38,205 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:08:38,205 - INFO - Timeline data saved on shutdown
2025-07-22 22:08:38,205 - INFO - Timeline data saved on shutdown
2025-07-22 22:08:38,206 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:08:38,206 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:08:38,207 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:08:38,207 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:08:38,207 - INFO - Query tracking data saved on shutdown
2025-07-22 22:08:38,207 - INFO - Query tracking data saved on shutdown
2025-07-22 22:08:38,247 - INFO -  * Restarting with stat
2025-07-22 22:08:38,451 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:08:38,451 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:08:38,451 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:08:38,451 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:08:38,451 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:08:38,451 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:08:38,452 - INFO - Using file system for cache storage
2025-07-22 22:08:38,454 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:08:38,454 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:08:38,454 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:38,454 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:08:38,454 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:08:38,454 - INFO - Directory permissions: 0o40755
2025-07-22 22:08:38,454 - INFO - Directory writable: True
2025-07-22 22:08:38,454 - INFO - Getting database configuration...
2025-07-22 22:08:38,454 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:38,454 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:38,454 - INFO - Using persistent storage configuration
2025-07-22 22:08:38,454 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:38,454 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:38,454 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:38,454 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:38,454 - INFO - Database config manager initialized
2025-07-22 22:08:38,456 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:08:38,456 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:08:38,456 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:38,456 - INFO - Getting database configuration...
2025-07-22 22:08:38,456 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:38,456 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:38,456 - INFO - Using persistent storage configuration
2025-07-22 22:08:38,456 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:38,456 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:38,456 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:38,456 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:08:38,456 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:08:38,457 - INFO - Getting database configuration...
2025-07-22 22:08:38,457 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:38,457 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:38,457 - INFO - Using persistent storage configuration
2025-07-22 22:08:38,457 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:38,457 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:38,457 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:38,458 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:38,458 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:38,458 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:38,458 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:38,458 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:38,458 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:38,504 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:38,504 - INFO - Attempting MySQL connection...
2025-07-22 22:08:38,504 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:38,676 - INFO - MySQL connection successful!
2025-07-22 22:08:38,720 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:08:38,720 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:08:40,726 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:08:40,726 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:08:40,726 - INFO - Getting database configuration...
2025-07-22 22:08:40,727 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:40,727 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:40,727 - INFO - Using persistent storage configuration
2025-07-22 22:08:40,727 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:40,727 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:40,727 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:40,727 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:40,727 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:40,727 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:40,728 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:40,728 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:40,728 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:40,772 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:40,773 - INFO - Attempting MySQL connection...
2025-07-22 22:08:40,773 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:40,945 - INFO - MySQL connection successful!
2025-07-22 22:08:40,987 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:08:40,988 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:08:44,993 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:08:44,993 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:08:44,993 - INFO - Getting database configuration...
2025-07-22 22:08:44,994 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:44,994 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:44,994 - INFO - Using persistent storage configuration
2025-07-22 22:08:44,994 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:44,994 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:44,994 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:44,994 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:44,994 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:44,994 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:44,994 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:44,994 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:44,994 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:45,039 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:45,040 - INFO - Attempting MySQL connection...
2025-07-22 22:08:45,040 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:45,210 - INFO - MySQL connection successful!
2025-07-22 22:08:45,252 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:08:45,253 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:08:45,253 - INFO - Getting database configuration...
2025-07-22 22:08:45,253 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:45,253 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:45,254 - INFO - Using persistent storage configuration
2025-07-22 22:08:45,254 - INFO - Initializing content database...
2025-07-22 22:08:45,254 - INFO - Initializing content database connection...
2025-07-22 22:08:45,254 - INFO - Attempting to establish database connection...
2025-07-22 22:08:45,254 - INFO - Getting database configuration...
2025-07-22 22:08:45,254 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:45,254 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:45,254 - INFO - Using persistent storage configuration
2025-07-22 22:08:45,254 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:45,254 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:45,254 - INFO - Database configuration loaded successfully
2025-07-22 22:08:45,254 - INFO - ✅ Content database initialized successfully
2025-07-22 22:08:45,254 - INFO - ✅ Content database initialized successfully
2025-07-22 22:08:45,254 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:08:45,254 - INFO - ✅ Server startup complete
2025-07-22 22:08:45,256 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:08:45,281 - WARNING -  * Debugger is active!
2025-07-22 22:08:45,290 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:08:55,843 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:08:55,845 - INFO - Cleaning up resources...
2025-07-22 22:08:55,845 - INFO - HTTP session closed
2025-07-22 22:08:55,845 - INFO - Connection pool closed
2025-07-22 22:08:55,845 - INFO - Content database connections closed
2025-07-22 22:08:55,859 - INFO - Garbage collection completed
2025-07-22 22:08:55,860 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:08:55,860 - INFO - Timeline data saved on shutdown
2025-07-22 22:08:55,861 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:08:55,861 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:08:55,861 - INFO - Query tracking data saved on shutdown
2025-07-22 22:08:55,887 - INFO -  * Restarting with stat
2025-07-22 22:08:56,149 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:08:56,149 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:08:56,150 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:08:56,150 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:08:56,150 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:08:56,150 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:08:56,150 - INFO - Using file system for cache storage
2025-07-22 22:08:56,152 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:08:56,152 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:08:56,152 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:56,152 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:08:56,152 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:08:56,152 - INFO - Directory permissions: 0o40755
2025-07-22 22:08:56,152 - INFO - Directory writable: True
2025-07-22 22:08:56,152 - INFO - Getting database configuration...
2025-07-22 22:08:56,152 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:56,152 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:56,152 - INFO - Using persistent storage configuration
2025-07-22 22:08:56,152 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:56,152 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:56,152 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:56,152 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:56,152 - INFO - Database config manager initialized
2025-07-22 22:08:56,154 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:08:56,154 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:08:56,154 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:08:56,154 - INFO - Getting database configuration...
2025-07-22 22:08:56,154 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:56,154 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:56,154 - INFO - Using persistent storage configuration
2025-07-22 22:08:56,154 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:08:56,154 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:08:56,155 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:08:56,155 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:08:56,155 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:08:56,155 - INFO - Getting database configuration...
2025-07-22 22:08:56,156 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:56,156 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:56,156 - INFO - Using persistent storage configuration
2025-07-22 22:08:56,156 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:56,156 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:56,156 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:56,157 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:56,157 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:56,157 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:56,157 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:56,157 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:56,157 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:56,202 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:56,203 - INFO - Attempting MySQL connection...
2025-07-22 22:08:56,203 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:56,375 - INFO - MySQL connection successful!
2025-07-22 22:08:56,420 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:08:56,420 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:08:58,423 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:08:58,424 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:08:58,424 - INFO - Getting database configuration...
2025-07-22 22:08:58,425 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:08:58,425 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:08:58,425 - INFO - Using persistent storage configuration
2025-07-22 22:08:58,425 - INFO - Loading database config from: persistent_storage
2025-07-22 22:08:58,426 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:08:58,426 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:08:58,426 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:08:58,426 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:08:58,426 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:08:58,426 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:08:58,426 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:08:58,426 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:08:58,471 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:08:58,471 - INFO - Attempting MySQL connection...
2025-07-22 22:08:58,471 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:08:58,642 - INFO - MySQL connection successful!
2025-07-22 22:08:58,684 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:08:58,684 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:09:02,690 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:09:02,691 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:02,691 - INFO - Getting database configuration...
2025-07-22 22:09:02,692 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:02,693 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:02,693 - INFO - Using persistent storage configuration
2025-07-22 22:09:02,693 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:02,693 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:02,693 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:02,693 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:02,693 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:02,693 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:02,693 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:02,693 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:02,693 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:02,738 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:02,738 - INFO - Attempting MySQL connection...
2025-07-22 22:09:02,738 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:02,910 - INFO - MySQL connection successful!
2025-07-22 22:09:02,954 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:02,954 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:09:02,954 - INFO - Getting database configuration...
2025-07-22 22:09:02,955 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:02,955 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:02,955 - INFO - Using persistent storage configuration
2025-07-22 22:09:02,955 - INFO - Initializing content database...
2025-07-22 22:09:02,955 - INFO - Initializing content database connection...
2025-07-22 22:09:02,955 - INFO - Attempting to establish database connection...
2025-07-22 22:09:02,955 - INFO - Getting database configuration...
2025-07-22 22:09:02,955 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:02,955 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:02,956 - INFO - Using persistent storage configuration
2025-07-22 22:09:02,956 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:02,956 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:02,956 - INFO - Database configuration loaded successfully
2025-07-22 22:09:02,956 - INFO - ✅ Content database initialized successfully
2025-07-22 22:09:02,956 - INFO - ✅ Content database initialized successfully
2025-07-22 22:09:02,956 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:09:02,956 - INFO - ✅ Server startup complete
2025-07-22 22:09:02,959 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:09:02,998 - WARNING -  * Debugger is active!
2025-07-22 22:09:03,006 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:09:03,048 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:03,048 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:03,051 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:03] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:09:03,060] INFO in app: ✅ Character routes registered
2025-07-22 22:09:03,060 - INFO - ✅ Character routes registered
[2025-07-22 22:09:03,060] INFO in app: 🔧 Debug OAuth endpoints enabled
2025-07-22 22:09:03,060 - INFO - 🔧 Debug OAuth endpoints enabled
[2025-07-22 22:09:03,060] INFO in app: 🔧 Enhanced OAuth troubleshooting enabled
2025-07-22 22:09:03,060 - INFO - 🔧 Enhanced OAuth troubleshooting enabled
[2025-07-22 22:09:03,060] INFO in app: 🔧 OAuth production fix endpoints enabled
2025-07-22 22:09:03,060 - INFO - 🔧 OAuth production fix endpoints enabled
[2025-07-22 22:09:03,060] INFO in app: ✅ OAuth user accounts enabled
2025-07-22 22:09:03,060 - INFO - ✅ OAuth user accounts enabled
[2025-07-22 22:09:03,061] INFO in app: Running in LOCAL DEVELOPMENT environment
2025-07-22 22:09:03,061 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:09:03,061 - INFO - Running in LOCAL DEVELOPMENT environment
[2025-07-22 22:09:03,061] INFO in app: Configuring database for OAuth from DATABASE_URL
2025-07-22 22:09:03,061 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:09:03,061 - INFO - Configuring database for OAuth from DATABASE_URL
[2025-07-22 22:09:03,061] INFO in app: DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:09:03,061 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:09:03,061 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
[2025-07-22 22:09:03,061] INFO in app: Using PostgreSQL database for user accounts
2025-07-22 22:09:03,061 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:09:03,061 - INFO - Using PostgreSQL database for user accounts
[2025-07-22 22:09:03,061] INFO in app: DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:09:03,061 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:09:03,061 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
[2025-07-22 22:09:03,061] INFO in app: OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:09:03,061 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:09:03,061 - INFO - OAuth is enabled but no DATABASE_URL is set
[2025-07-22 22:09:03,061] INFO in app: Using file system for cache storage
2025-07-22 22:09:03,061 - INFO - Using file system for cache storage
2025-07-22 22:09:03,061 - INFO - Using file system for cache storage
2025-07-22 22:09:03,063 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:09:03,063 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:09:03,063 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:03,063 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:03,063 - INFO - Getting database configuration...
2025-07-22 22:09:03,063 - INFO - Getting database configuration...
2025-07-22 22:09:03,063 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:03,063 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:03,063 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:03,063 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:03,063 - INFO - Using persistent storage configuration
2025-07-22 22:09:03,063 - INFO - Using persistent storage configuration
2025-07-22 22:09:03,063 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:03,063 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:03,063 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:03,063 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:03,063 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:03,063 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:03,063 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:03,063 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
[2025-07-22 22:09:03,063] INFO in app: Database config manager initialized
2025-07-22 22:09:03,063 - INFO - Database config manager initialized
2025-07-22 22:09:03,063 - INFO - Database config manager initialized
2025-07-22 22:09:03,066 - INFO - Getting database configuration...
2025-07-22 22:09:03,066 - INFO - Getting database configuration...
2025-07-22 22:09:03,066 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:03,066 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:03,066 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:03,066 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:03,066 - INFO - Using persistent storage configuration
2025-07-22 22:09:03,066 - INFO - Using persistent storage configuration
2025-07-22 22:09:03,066 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:03,066 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:03,066 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:03,066 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:03,066 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:03,066 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:03,066 - INFO - Getting database configuration...
2025-07-22 22:09:03,066 - INFO - Getting database configuration...
2025-07-22 22:09:03,066 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:03,066 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:03,067 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:03,067 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:03,067 - INFO - Using persistent storage configuration
2025-07-22 22:09:03,067 - INFO - Using persistent storage configuration
2025-07-22 22:09:03,067 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:03,067 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:03,067 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:03,067 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:03,067 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:03,067 - INFO - Database configuration loaded from persistent storage
[2025-07-22 22:09:03,067] INFO in app: Database configuration changed, closing connection pool
2025-07-22 22:09:03,067 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:09:03,067 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:09:03,067 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:03,067 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:03,067 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:03,067 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:03,067 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:03,067 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:03,067 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:03,067 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:03,067 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:03,067 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:03,067 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:03,067 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:03,067 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:03,067 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:03,112 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:03,112 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:03,112 - INFO - Attempting MySQL connection...
2025-07-22 22:09:03,112 - INFO - Attempting MySQL connection...
2025-07-22 22:09:03,112 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:03,112 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:03,284 - INFO - MySQL connection successful!
2025-07-22 22:09:03,284 - INFO - MySQL connection successful!
2025-07-22 22:09:03,284 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:09:03,284 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:09:03,284 - INFO - Stats request for character 2453
2025-07-22 22:09:03,284 - INFO - Stats request for character 2453
2025-07-22 22:09:03,327 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:09:03,327 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:09:03,327 - ERROR - Database query failed: (1054, "Unknown column 'pr' in 'field list'")
2025-07-22 22:09:03,327 - ERROR - Database query failed: (1054, "Unknown column 'pr' in 'field list'")
2025-07-22 22:09:03,327 - ERROR - Error getting stats for character 2453: (1054, "Unknown column 'pr' in 'field list'")
2025-07-22 22:09:03,327 - ERROR - Error getting stats for character 2453: (1054, "Unknown column 'pr' in 'field list'")
2025-07-22 22:09:03,340 - ERROR - Full traceback: Traceback (most recent call last):
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py", line 658, in get_character_stats
    cursor.execute(char_query, (character_id,))
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/utils/query_tracker.py", line 25, in execute
    result = self.cursor.execute(query, params)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'pr' in 'field list'")

2025-07-22 22:09:03,340 - ERROR - Full traceback: Traceback (most recent call last):
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py", line 658, in get_character_stats
    cursor.execute(char_query, (character_id,))
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/utils/query_tracker.py", line 25, in execute
    result = self.cursor.execute(query, params)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'pr' in 'field list'")

2025-07-22 22:09:03,340 - ERROR - 📤 API Response: GET /api/characters/2453/stats → 500 | IP: 127.0.0.1
2025-07-22 22:09:03,340 - ERROR - 📤 API Response: GET /api/characters/2453/stats → 500 | IP: 127.0.0.1
2025-07-22 22:09:03,340 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 291.08405113220215ms - Error: None
2025-07-22 22:09:03,340 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 291.08405113220215ms - Error: None
2025-07-22 22:09:03,340 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 291.08405113220215ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:09:03,340 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 291.08405113220215ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:09:03,341 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:03] "[35m[1mGET /api/characters/2453/stats HTTP/1.1[0m" 500 -
2025-07-22 22:09:03,341 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:03] "[35m[1mGET /api/characters/2453/stats HTTP/1.1[0m" 500 -
2025-07-22 22:09:16,769 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
2025-07-22 22:09:16,769 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:09:16,772 - INFO - Cleaning up resources...
2025-07-22 22:09:16,772 - INFO - Cleaning up resources...
2025-07-22 22:09:16,772 - INFO - HTTP session closed
2025-07-22 22:09:16,772 - INFO - HTTP session closed
2025-07-22 22:09:16,772 - INFO - Connection pool closed
2025-07-22 22:09:16,772 - INFO - Connection pool closed
2025-07-22 22:09:16,772 - INFO - Content database connections closed
2025-07-22 22:09:16,772 - INFO - Content database connections closed
2025-07-22 22:09:16,780 - INFO - Garbage collection completed
2025-07-22 22:09:16,780 - INFO - Garbage collection completed
2025-07-22 22:09:16,781 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:09:16,781 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:09:16,781 - INFO - Timeline data saved on shutdown
2025-07-22 22:09:16,781 - INFO - Timeline data saved on shutdown
2025-07-22 22:09:16,782 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:09:16,782 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:09:16,782 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:09:16,782 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:09:16,782 - INFO - Query tracking data saved on shutdown
2025-07-22 22:09:16,782 - INFO - Query tracking data saved on shutdown
2025-07-22 22:09:16,814 - INFO -  * Restarting with stat
2025-07-22 22:09:17,078 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:09:17,078 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:09:17,078 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:09:17,078 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:09:17,078 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:09:17,078 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:09:17,078 - INFO - Using file system for cache storage
2025-07-22 22:09:17,080 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:09:17,080 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:09:17,080 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:17,081 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:09:17,081 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:09:17,081 - INFO - Directory permissions: 0o40755
2025-07-22 22:09:17,081 - INFO - Directory writable: True
2025-07-22 22:09:17,081 - INFO - Getting database configuration...
2025-07-22 22:09:17,081 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:17,081 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:17,081 - INFO - Using persistent storage configuration
2025-07-22 22:09:17,081 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:17,081 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:17,081 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:17,081 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:17,081 - INFO - Database config manager initialized
2025-07-22 22:09:17,083 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:09:17,083 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:09:17,083 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:17,083 - INFO - Getting database configuration...
2025-07-22 22:09:17,083 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:17,083 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:17,083 - INFO - Using persistent storage configuration
2025-07-22 22:09:17,083 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:17,083 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:17,083 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:17,083 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:09:17,083 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:17,084 - INFO - Getting database configuration...
2025-07-22 22:09:17,084 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:17,084 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:17,084 - INFO - Using persistent storage configuration
2025-07-22 22:09:17,084 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:17,084 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:17,084 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:17,085 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:17,085 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:17,085 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:17,085 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:17,085 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:17,085 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:17,131 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:17,131 - INFO - Attempting MySQL connection...
2025-07-22 22:09:17,131 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:17,302 - INFO - MySQL connection successful!
2025-07-22 22:09:17,345 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:17,346 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:09:19,351 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:09:19,352 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:19,352 - INFO - Getting database configuration...
2025-07-22 22:09:19,352 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:19,352 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:19,353 - INFO - Using persistent storage configuration
2025-07-22 22:09:19,353 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:19,353 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:19,353 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:19,353 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:19,354 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:19,354 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:19,354 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:19,354 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:19,354 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:19,400 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:19,401 - INFO - Attempting MySQL connection...
2025-07-22 22:09:19,401 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:19,580 - INFO - MySQL connection successful!
2025-07-22 22:09:19,625 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:19,626 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:09:23,626 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:09:23,627 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:23,627 - INFO - Getting database configuration...
2025-07-22 22:09:23,627 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:23,627 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:23,627 - INFO - Using persistent storage configuration
2025-07-22 22:09:23,627 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:23,628 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:23,628 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:23,628 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:23,628 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:23,628 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:23,628 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:23,628 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:23,628 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:23,673 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:23,673 - INFO - Attempting MySQL connection...
2025-07-22 22:09:23,674 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:23,846 - INFO - MySQL connection successful!
2025-07-22 22:09:23,889 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:23,889 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:09:23,889 - INFO - Getting database configuration...
2025-07-22 22:09:23,890 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:23,890 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:23,890 - INFO - Using persistent storage configuration
2025-07-22 22:09:23,891 - INFO - Initializing content database...
2025-07-22 22:09:23,891 - INFO - Initializing content database connection...
2025-07-22 22:09:23,891 - INFO - Attempting to establish database connection...
2025-07-22 22:09:23,891 - INFO - Getting database configuration...
2025-07-22 22:09:23,891 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:23,892 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:23,892 - INFO - Using persistent storage configuration
2025-07-22 22:09:23,892 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:23,892 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:23,892 - INFO - Database configuration loaded successfully
2025-07-22 22:09:23,892 - INFO - ✅ Content database initialized successfully
2025-07-22 22:09:23,892 - INFO - ✅ Content database initialized successfully
2025-07-22 22:09:23,892 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:09:23,892 - INFO - ✅ Server startup complete
2025-07-22 22:09:23,895 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:09:23,928 - WARNING -  * Debugger is active!
2025-07-22 22:09:23,935 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:09:28,171 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:32,863 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:33,391 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:09:33,393 - INFO - Cleaning up resources...
2025-07-22 22:09:33,393 - INFO - HTTP session closed
2025-07-22 22:09:33,393 - INFO - Connection pool closed
2025-07-22 22:09:33,393 - INFO - Content database connections closed
2025-07-22 22:09:33,400 - INFO - Garbage collection completed
2025-07-22 22:09:33,401 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:09:33,401 - INFO - Timeline data saved on shutdown
2025-07-22 22:09:33,401 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:09:33,402 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:09:33,402 - INFO - Query tracking data saved on shutdown
2025-07-22 22:09:33,426 - INFO -  * Restarting with stat
2025-07-22 22:09:33,608 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:09:33,608 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:09:33,608 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:09:33,608 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:09:33,608 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:09:33,608 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:09:33,608 - INFO - Using file system for cache storage
2025-07-22 22:09:33,610 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:09:33,610 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:09:33,610 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:33,610 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:09:33,610 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:09:33,610 - INFO - Directory permissions: 0o40755
2025-07-22 22:09:33,610 - INFO - Directory writable: True
2025-07-22 22:09:33,610 - INFO - Getting database configuration...
2025-07-22 22:09:33,610 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:33,610 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:33,610 - INFO - Using persistent storage configuration
2025-07-22 22:09:33,610 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:33,610 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:33,610 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:33,610 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:33,610 - INFO - Database config manager initialized
2025-07-22 22:09:33,612 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:09:33,612 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:09:33,612 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:33,612 - INFO - Getting database configuration...
2025-07-22 22:09:33,612 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:33,612 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:33,612 - INFO - Using persistent storage configuration
2025-07-22 22:09:33,613 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:33,613 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:33,613 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:33,613 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:09:33,613 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:33,613 - INFO - Getting database configuration...
2025-07-22 22:09:33,613 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:33,613 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:33,613 - INFO - Using persistent storage configuration
2025-07-22 22:09:33,613 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:33,613 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:33,613 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:33,614 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:33,614 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:33,614 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:33,614 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:33,614 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:33,614 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:33,659 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:33,659 - INFO - Attempting MySQL connection...
2025-07-22 22:09:33,659 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:33,828 - INFO - MySQL connection successful!
2025-07-22 22:09:33,869 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:33,869 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:09:35,871 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:09:35,871 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:35,871 - INFO - Getting database configuration...
2025-07-22 22:09:35,872 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:35,872 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:35,872 - INFO - Using persistent storage configuration
2025-07-22 22:09:35,872 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:35,872 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:35,872 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:35,873 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:35,873 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:35,873 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:35,873 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:35,873 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:35,873 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:35,917 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:35,917 - INFO - Attempting MySQL connection...
2025-07-22 22:09:35,917 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:36,088 - INFO - MySQL connection successful!
2025-07-22 22:09:36,132 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:36,132 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:09:40,138 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:09:40,138 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:09:40,138 - INFO - Getting database configuration...
2025-07-22 22:09:40,139 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:40,139 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:40,139 - INFO - Using persistent storage configuration
2025-07-22 22:09:40,139 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:40,139 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:40,140 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:40,140 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:40,140 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:40,140 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:40,140 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:40,140 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:40,140 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:40,186 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:40,186 - INFO - Attempting MySQL connection...
2025-07-22 22:09:40,186 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:40,357 - INFO - MySQL connection successful!
2025-07-22 22:09:40,400 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:09:40,401 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:09:40,401 - INFO - Getting database configuration...
2025-07-22 22:09:40,401 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:40,401 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:40,401 - INFO - Using persistent storage configuration
2025-07-22 22:09:40,402 - INFO - Initializing content database...
2025-07-22 22:09:40,402 - INFO - Initializing content database connection...
2025-07-22 22:09:40,402 - INFO - Attempting to establish database connection...
2025-07-22 22:09:40,402 - INFO - Getting database configuration...
2025-07-22 22:09:40,402 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:40,402 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:40,402 - INFO - Using persistent storage configuration
2025-07-22 22:09:40,402 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:40,402 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:40,402 - INFO - Database configuration loaded successfully
2025-07-22 22:09:40,402 - INFO - ✅ Content database initialized successfully
2025-07-22 22:09:40,402 - INFO - ✅ Content database initialized successfully
2025-07-22 22:09:40,403 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:09:40,403 - INFO - ✅ Server startup complete
2025-07-22 22:09:40,405 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:09:40,439 - WARNING -  * Debugger is active!
2025-07-22 22:09:40,448 - INFO -  * Debugger PIN: 871-508-735
[2025-07-22 22:09:46,616] INFO in app: ✅ Character routes registered
2025-07-22 22:09:46,616 - INFO - ✅ Character routes registered
[2025-07-22 22:09:46,617] INFO in app: 🔧 Debug OAuth endpoints enabled
2025-07-22 22:09:46,617 - INFO - 🔧 Debug OAuth endpoints enabled
[2025-07-22 22:09:46,617] INFO in app: 🔧 Enhanced OAuth troubleshooting enabled
2025-07-22 22:09:46,617 - INFO - 🔧 Enhanced OAuth troubleshooting enabled
[2025-07-22 22:09:46,617] INFO in app: 🔧 OAuth production fix endpoints enabled
2025-07-22 22:09:46,617 - INFO - 🔧 OAuth production fix endpoints enabled
[2025-07-22 22:09:46,617] INFO in app: ✅ OAuth user accounts enabled
2025-07-22 22:09:46,617 - INFO - ✅ OAuth user accounts enabled
[2025-07-22 22:09:46,618] INFO in app: Running in LOCAL DEVELOPMENT environment
2025-07-22 22:09:46,618 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:09:46,618 - INFO - Running in LOCAL DEVELOPMENT environment
[2025-07-22 22:09:46,618] INFO in app: Configuring database for OAuth from DATABASE_URL
2025-07-22 22:09:46,618 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:09:46,618 - INFO - Configuring database for OAuth from DATABASE_URL
[2025-07-22 22:09:46,618] INFO in app: DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:09:46,618 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:09:46,618 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
[2025-07-22 22:09:46,618] INFO in app: Using PostgreSQL database for user accounts
2025-07-22 22:09:46,618 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:09:46,618 - INFO - Using PostgreSQL database for user accounts
[2025-07-22 22:09:46,618] INFO in app: DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:09:46,618 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:09:46,618 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
[2025-07-22 22:09:46,618] INFO in app: OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:09:46,618 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:09:46,618 - INFO - OAuth is enabled but no DATABASE_URL is set
[2025-07-22 22:09:46,618] INFO in app: Using file system for cache storage
2025-07-22 22:09:46,618 - INFO - Using file system for cache storage
2025-07-22 22:09:46,618 - INFO - Using file system for cache storage
2025-07-22 22:09:46,620 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:09:46,620 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:09:46,620 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:46,620 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:46,621 - INFO - Getting database configuration...
2025-07-22 22:09:46,621 - INFO - Getting database configuration...
2025-07-22 22:09:46,621 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:46,621 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:46,621 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:46,621 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:46,621 - INFO - Using persistent storage configuration
2025-07-22 22:09:46,621 - INFO - Using persistent storage configuration
2025-07-22 22:09:46,621 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:46,621 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:46,621 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:46,621 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:46,621 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:46,621 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:46,621 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:46,621 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
[2025-07-22 22:09:46,621] INFO in app: Database config manager initialized
2025-07-22 22:09:46,621 - INFO - Database config manager initialized
2025-07-22 22:09:46,621 - INFO - Database config manager initialized
2025-07-22 22:09:46,626 - INFO - Getting database configuration...
2025-07-22 22:09:46,626 - INFO - Getting database configuration...
2025-07-22 22:09:46,626 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:46,626 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:46,626 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:46,626 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:46,626 - INFO - Using persistent storage configuration
2025-07-22 22:09:46,626 - INFO - Using persistent storage configuration
2025-07-22 22:09:46,626 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:46,626 - INFO - Loading database config from: persistent_storage
2025-07-22 22:09:46,626 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:46,626 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:09:46,626 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:46,626 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:09:46,626 - INFO - Getting database configuration...
2025-07-22 22:09:46,626 - INFO - Getting database configuration...
2025-07-22 22:09:46,626 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:46,626 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:09:46,626 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:46,626 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:09:46,626 - INFO - Using persistent storage configuration
2025-07-22 22:09:46,626 - INFO - Using persistent storage configuration
2025-07-22 22:09:46,626 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:46,626 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:09:46,626 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:46,626 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:09:46,626 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:09:46,626 - INFO - Database configuration loaded from persistent storage
[2025-07-22 22:09:46,626] INFO in app: Database configuration changed, closing connection pool
2025-07-22 22:09:46,626 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:09:46,626 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:09:46,626 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:46,626 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:09:46,626 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:46,626 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:09:46,627 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:46,627 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:09:46,627 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:46,627 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:09:46,627 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:46,627 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:09:46,627 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:46,627 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:09:46,627 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:46,627 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:09:46,671 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:46,671 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:09:46,671 - INFO - Attempting MySQL connection...
2025-07-22 22:09:46,671 - INFO - Attempting MySQL connection...
2025-07-22 22:09:46,671 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:46,671 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:09:46,842 - INFO - MySQL connection successful!
2025-07-22 22:09:46,842 - INFO - MySQL connection successful!
2025-07-22 22:09:46,842 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:09:46,842 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:09:46,842 - INFO - Stats request for character 2453
2025-07-22 22:09:46,842 - INFO - Stats request for character 2453
2025-07-22 22:09:46,884 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:09:46,884 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:09:46,927 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:09:46,927 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:09:46,927 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:09:46,927 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:09:46,928 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:46] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:09:46,928 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:46] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:09:58,172 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:58,172 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:59,483 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:59] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:09:59,483 - INFO - 127.0.0.1 - - [22/Jul/2025 22:09:59] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:02,864 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:02,864 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:13,115 - INFO - Getting database configuration...
2025-07-22 22:10:13,115 - INFO - Getting database configuration...
2025-07-22 22:10:13,115 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:13,115 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:13,115 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:13,115 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:13,115 - INFO - Using persistent storage configuration
2025-07-22 22:10:13,115 - INFO - Using persistent storage configuration
2025-07-22 22:10:13,115 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:13,115 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:13,115 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:13,115 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:13,115 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:13,115 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:13,115 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:13,115 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:13,115 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:13,115 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:13,115 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:13,115 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:13,116 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:13,116 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:13,116 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:13,116 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:13,116 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:13,116 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:13,162 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:13,162 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:13,163 - INFO - Attempting MySQL connection...
2025-07-22 22:10:13,163 - INFO - Attempting MySQL connection...
2025-07-22 22:10:13,163 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:13,163 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:13,335 - INFO - MySQL connection successful!
2025-07-22 22:10:13,335 - INFO - MySQL connection successful!
2025-07-22 22:10:13,335 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:13,335 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:13,335 - INFO - Stats request for character 302
2025-07-22 22:10:13,335 - INFO - Stats request for character 302
2025-07-22 22:10:13,378 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:13,378 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:13,421 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:13,421 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:13,422 - INFO - Enhanced stats for character 302: AC=670, ATK=30, Weight=1311, HP=7919+1885, MP=5302+1155, Resistances={'poison': 153, 'magic': 147, 'disease': 157, 'fire': 163, 'cold': 143, 'corrupt': 0}
2025-07-22 22:10:13,422 - INFO - Enhanced stats for character 302: AC=670, ATK=30, Weight=1311, HP=7919+1885, MP=5302+1155, Resistances={'poison': 153, 'magic': 147, 'disease': 157, 'fire': 163, 'cold': 143, 'corrupt': 0}
2025-07-22 22:10:13,422 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:13] "GET /api/characters/302/stats HTTP/1.1" 200 -
2025-07-22 22:10:13,422 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:13] "GET /api/characters/302/stats HTTP/1.1" 200 -
2025-07-22 22:10:28,171 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:28,171 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:32,864 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:32,864 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:48,251 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:10:48,251 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:10:48,252 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:10:48,252 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:10:48,253 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 357.08117485046387ms - Error: None
2025-07-22 22:10:48,253 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 357.08117485046387ms - Error: None
2025-07-22 22:10:48,253 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 357.08117485046387ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:10:48,253 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 357.08117485046387ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:10:48,253 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:48] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:10:48,253 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:48] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:10:51,695 - INFO - Getting database configuration...
2025-07-22 22:10:51,695 - INFO - Getting database configuration...
2025-07-22 22:10:51,697 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:51,697 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:51,697 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:51,697 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:51,697 - INFO - Using persistent storage configuration
2025-07-22 22:10:51,697 - INFO - Using persistent storage configuration
2025-07-22 22:10:51,697 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:51,697 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:51,697 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:51,697 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:51,697 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:51,697 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:51,699 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:51,699 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:51,699 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:51,699 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:51,699 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:51,699 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:51,699 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:51,699 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:51,699 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:51,699 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:51,699 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:51,699 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:51,746 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:51,746 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:51,746 - INFO - Attempting MySQL connection...
2025-07-22 22:10:51,746 - INFO - Attempting MySQL connection...
2025-07-22 22:10:51,747 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:51,747 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:51,921 - INFO - MySQL connection successful!
2025-07-22 22:10:51,921 - INFO - MySQL connection successful!
2025-07-22 22:10:51,921 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:51,921 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:51,968 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:51,968 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:51,969 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:51] "GET /api/characters/search?name=Valgor HTTP/1.1" 200 -
2025-07-22 22:10:51,969 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:51] "GET /api/characters/search?name=Valgor HTTP/1.1" 200 -
2025-07-22 22:10:53,277 - INFO - Getting database configuration...
2025-07-22 22:10:53,277 - INFO - Getting database configuration...
2025-07-22 22:10:53,277 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,277 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,278 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,278 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,278 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,278 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,278 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,278 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,278 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,278 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,278 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,278 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,279 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,279 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,279 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,279 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,279 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,279 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,279 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,279 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,279 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,279 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,279 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,279 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,324 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,324 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,324 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,324 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,324 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,324 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,498 - INFO - MySQL connection successful!
2025-07-22 22:10:53,498 - INFO - MySQL connection successful!
2025-07-22 22:10:53,499 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,499 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,545 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:53,545 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:53,546 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453 HTTP/1.1" 200 -
2025-07-22 22:10:53,546 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453 HTTP/1.1" 200 -
2025-07-22 22:10:53,554 - INFO - Getting database configuration...
2025-07-22 22:10:53,554 - INFO - Getting database configuration...
2025-07-22 22:10:53,555 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,555 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,556 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,556 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,556 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,556 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,556 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,556 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,556 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,556 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,556 - INFO - Getting database configuration...
2025-07-22 22:10:53,556 - INFO - Getting database configuration...
2025-07-22 22:10:53,556 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,556 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,557 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,557 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,557 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,557 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,557 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,557 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,557 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,557 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,557 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,557 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,557 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,557 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,557 - INFO - Getting database configuration...
2025-07-22 22:10:53,557 - INFO - Getting database configuration...
2025-07-22 22:10:53,558 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,558 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:10:53,558 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,558 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,558 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,558 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,558 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,558 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:10:53,558 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,558 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,558 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,558 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,559 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,559 - INFO - Using persistent storage configuration
2025-07-22 22:10:53,559 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,559 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,559 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,559 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,559 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,559 - INFO - Loading database config from: persistent_storage
2025-07-22 22:10:53,559 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,559 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,559 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,559 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,559 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,559 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:10:53,559 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,559 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,559 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,559 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,560 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,560 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:10:53,560 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,560 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,560 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,560 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,561 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,561 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:10:53,561 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,561 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:10:53,561 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,561 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:10:53,561 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,561 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:10:53,561 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,561 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:10:53,561 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,561 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:10:53,605 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,605 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,605 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,605 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,605 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,605 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,605 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,605 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,605 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,605 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,605 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,605 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,610 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,610 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:10:53,610 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,610 - INFO - Attempting MySQL connection...
2025-07-22 22:10:53,610 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,610 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:10:53,777 - INFO - MySQL connection successful!
2025-07-22 22:10:53,777 - INFO - MySQL connection successful!
2025-07-22 22:10:53,778 - INFO - MySQL connection successful!
2025-07-22 22:10:53,778 - INFO - MySQL connection successful!
2025-07-22 22:10:53,778 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,778 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,778 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,778 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,778 - INFO - Currency request for character 2453
2025-07-22 22:10:53,778 - INFO - Currency request for character 2453
2025-07-22 22:10:53,780 - INFO - MySQL connection successful!
2025-07-22 22:10:53,780 - INFO - MySQL connection successful!
2025-07-22 22:10:53,780 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,780 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:10:53,780 - INFO - Stats request for character 2453
2025-07-22 22:10:53,780 - INFO - Stats request for character 2453
2025-07-22 22:10:53,822 - ERROR - Direct query tracking failed: 'character_currency'
2025-07-22 22:10:53,822 - ERROR - Direct query tracking failed: 'character_currency'
2025-07-22 22:10:53,823 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:53,823 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:10:53,828 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:53,828 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:53,829 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453/currency HTTP/1.1" 200 -
2025-07-22 22:10:53,829 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453/currency HTTP/1.1" 200 -
2025-07-22 22:10:53,874 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:53,874 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:53,875 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:53,875 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:10:53,875 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:10:53,875 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:10:53,876 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:10:53,876 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:10:53,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453/inventory HTTP/1.1" 200 -
2025-07-22 22:10:53,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:53] "GET /api/characters/2453/inventory HTTP/1.1" 200 -
2025-07-22 22:10:58,170 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:58,170 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:59,974 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:59] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:10:59,974 - INFO - 127.0.0.1 - - [22/Jul/2025 22:10:59] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:11:02,866 - INFO - 127.0.0.1 - - [22/Jul/2025 22:11:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:11:02,866 - INFO - 127.0.0.1 - - [22/Jul/2025 22:11:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:11:28,173 - INFO - 127.0.0.1 - - [22/Jul/2025 22:11:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:11:28,173 - INFO - 127.0.0.1 - - [22/Jul/2025 22:11:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:11:58,173 - INFO - 127.0.0.1 - - [22/Jul/2025 22:11:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:11:58,173 - INFO - 127.0.0.1 - - [22/Jul/2025 22:11:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:00,434 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:00] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:00,434 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:00] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:28,174 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:28,174 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:30,868 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:30,868 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:58,174 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:12:58,174 - INFO - 127.0.0.1 - - [22/Jul/2025 22:12:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:00,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:00] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:00,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:00] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:28,174 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:28,174 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:30,869 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:30,869 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:58,175 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:13:58,175 - INFO - 127.0.0.1 - - [22/Jul/2025 22:13:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:01,330 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:01] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:01,330 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:01] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:28,175 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:28,175 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:30,869 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:30,869 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:42,307 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
2025-07-22 22:14:42,307 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:14:42,310 - INFO - Cleaning up resources...
2025-07-22 22:14:42,310 - INFO - Cleaning up resources...
2025-07-22 22:14:42,310 - INFO - HTTP session closed
2025-07-22 22:14:42,310 - INFO - HTTP session closed
2025-07-22 22:14:42,310 - INFO - Connection pool closed
2025-07-22 22:14:42,310 - INFO - Connection pool closed
2025-07-22 22:14:42,310 - INFO - Content database connections closed
2025-07-22 22:14:42,310 - INFO - Content database connections closed
2025-07-22 22:14:42,323 - INFO - Garbage collection completed
2025-07-22 22:14:42,323 - INFO - Garbage collection completed
2025-07-22 22:14:42,323 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:14:42,323 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:14:42,323 - INFO - Timeline data saved on shutdown
2025-07-22 22:14:42,323 - INFO - Timeline data saved on shutdown
2025-07-22 22:14:42,324 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:14:42,324 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:14:42,324 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:14:42,324 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:14:42,324 - INFO - Query tracking data saved on shutdown
2025-07-22 22:14:42,324 - INFO - Query tracking data saved on shutdown
2025-07-22 22:14:42,359 - INFO -  * Restarting with stat
2025-07-22 22:14:42,620 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:14:42,620 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:14:42,620 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:14:42,620 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:14:42,620 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:14:42,620 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:14:42,620 - INFO - Using file system for cache storage
2025-07-22 22:14:42,622 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:14:42,622 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:14:42,622 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:14:42,622 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:14:42,622 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:14:42,622 - INFO - Directory permissions: 0o40755
2025-07-22 22:14:42,622 - INFO - Directory writable: True
2025-07-22 22:14:42,622 - INFO - Getting database configuration...
2025-07-22 22:14:42,623 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:42,623 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:42,623 - INFO - Using persistent storage configuration
2025-07-22 22:14:42,623 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:14:42,623 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:14:42,623 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:14:42,623 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:14:42,623 - INFO - Database config manager initialized
2025-07-22 22:14:42,625 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:14:42,625 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:14:42,625 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:14:42,625 - INFO - Getting database configuration...
2025-07-22 22:14:42,625 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:42,625 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:42,625 - INFO - Using persistent storage configuration
2025-07-22 22:14:42,625 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:14:42,625 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:14:42,625 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:14:42,625 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:14:42,625 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:14:42,626 - INFO - Getting database configuration...
2025-07-22 22:14:42,626 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:42,626 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:42,626 - INFO - Using persistent storage configuration
2025-07-22 22:14:42,626 - INFO - Loading database config from: persistent_storage
2025-07-22 22:14:42,626 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:14:42,626 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:14:42,627 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:14:42,627 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:14:42,627 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:14:42,627 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:14:42,627 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:14:42,627 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:14:42,673 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:14:42,673 - INFO - Attempting MySQL connection...
2025-07-22 22:14:42,673 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:14:42,844 - INFO - MySQL connection successful!
2025-07-22 22:14:42,887 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:14:42,887 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:14:44,892 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:14:44,892 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:14:44,892 - INFO - Getting database configuration...
2025-07-22 22:14:44,892 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:44,892 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:44,892 - INFO - Using persistent storage configuration
2025-07-22 22:14:44,892 - INFO - Loading database config from: persistent_storage
2025-07-22 22:14:44,892 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:14:44,892 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:14:44,892 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:14:44,892 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:14:44,892 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:14:44,892 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:14:44,892 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:14:44,892 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:14:44,938 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:14:44,938 - INFO - Attempting MySQL connection...
2025-07-22 22:14:44,938 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:14:45,115 - INFO - MySQL connection successful!
2025-07-22 22:14:45,159 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:14:45,159 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:14:49,164 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:14:49,165 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:14:49,165 - INFO - Getting database configuration...
2025-07-22 22:14:49,165 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:49,165 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:49,165 - INFO - Using persistent storage configuration
2025-07-22 22:14:49,165 - INFO - Loading database config from: persistent_storage
2025-07-22 22:14:49,165 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:14:49,165 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:14:49,165 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:14:49,166 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:14:49,166 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:14:49,166 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:14:49,166 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:14:49,166 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:14:49,209 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:14:49,210 - INFO - Attempting MySQL connection...
2025-07-22 22:14:49,210 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:14:49,381 - INFO - MySQL connection successful!
2025-07-22 22:14:49,423 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:14:49,423 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:14:49,423 - INFO - Getting database configuration...
2025-07-22 22:14:49,423 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:49,424 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:49,424 - INFO - Using persistent storage configuration
2025-07-22 22:14:49,424 - INFO - Initializing content database...
2025-07-22 22:14:49,424 - INFO - Initializing content database connection...
2025-07-22 22:14:49,424 - INFO - Attempting to establish database connection...
2025-07-22 22:14:49,424 - INFO - Getting database configuration...
2025-07-22 22:14:49,424 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:49,424 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:49,424 - INFO - Using persistent storage configuration
2025-07-22 22:14:49,424 - INFO - Loading database config from: persistent_storage
2025-07-22 22:14:49,424 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:14:49,424 - INFO - Database configuration loaded successfully
2025-07-22 22:14:49,424 - INFO - ✅ Content database initialized successfully
2025-07-22 22:14:49,424 - INFO - ✅ Content database initialized successfully
2025-07-22 22:14:49,424 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:14:49,424 - INFO - ✅ Server startup complete
2025-07-22 22:14:49,426 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:14:49,457 - WARNING -  * Debugger is active!
2025-07-22 22:14:49,465 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:14:58,178 - INFO - 127.0.0.1 - - [22/Jul/2025 22:14:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:14:58,856 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:14:58,857 - INFO - Cleaning up resources...
2025-07-22 22:14:58,857 - INFO - HTTP session closed
2025-07-22 22:14:58,857 - INFO - Connection pool closed
2025-07-22 22:14:58,857 - INFO - Content database connections closed
2025-07-22 22:14:58,864 - INFO - Garbage collection completed
2025-07-22 22:14:58,864 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:14:58,864 - INFO - Timeline data saved on shutdown
2025-07-22 22:14:58,865 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:14:58,865 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:14:58,865 - INFO - Query tracking data saved on shutdown
2025-07-22 22:14:58,887 - INFO -  * Restarting with stat
2025-07-22 22:14:59,071 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:14:59,071 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:14:59,071 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:14:59,071 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:14:59,071 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:14:59,071 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:14:59,071 - INFO - Using file system for cache storage
2025-07-22 22:14:59,073 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:14:59,073 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:14:59,073 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:14:59,073 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:14:59,073 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:14:59,073 - INFO - Directory permissions: 0o40755
2025-07-22 22:14:59,073 - INFO - Directory writable: True
2025-07-22 22:14:59,073 - INFO - Getting database configuration...
2025-07-22 22:14:59,073 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:59,073 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:59,074 - INFO - Using persistent storage configuration
2025-07-22 22:14:59,074 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:14:59,074 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:14:59,074 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:14:59,074 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:14:59,074 - INFO - Database config manager initialized
2025-07-22 22:14:59,076 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:14:59,076 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:14:59,076 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:14:59,076 - INFO - Getting database configuration...
2025-07-22 22:14:59,076 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:59,076 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:59,076 - INFO - Using persistent storage configuration
2025-07-22 22:14:59,076 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:14:59,076 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:14:59,076 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:14:59,076 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:14:59,076 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:14:59,077 - INFO - Getting database configuration...
2025-07-22 22:14:59,077 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:14:59,077 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:14:59,077 - INFO - Using persistent storage configuration
2025-07-22 22:14:59,077 - INFO - Loading database config from: persistent_storage
2025-07-22 22:14:59,077 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:14:59,077 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:14:59,078 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:14:59,078 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:14:59,078 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:14:59,078 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:14:59,078 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:14:59,078 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:14:59,121 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:14:59,121 - INFO - Attempting MySQL connection...
2025-07-22 22:14:59,121 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:14:59,291 - INFO - MySQL connection successful!
2025-07-22 22:14:59,333 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:14:59,333 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:15:01,339 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:15:01,341 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:15:01,341 - INFO - Getting database configuration...
2025-07-22 22:15:01,342 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:15:01,342 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:15:01,342 - INFO - Using persistent storage configuration
2025-07-22 22:15:01,342 - INFO - Loading database config from: persistent_storage
2025-07-22 22:15:01,342 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:15:01,342 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:15:01,342 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:15:01,342 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:15:01,342 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:15:01,342 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:15:01,342 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:15:01,342 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:15:01,390 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:15:01,391 - INFO - Attempting MySQL connection...
2025-07-22 22:15:01,391 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:15:01,562 - INFO - MySQL connection successful!
2025-07-22 22:15:01,604 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:15:01,604 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:15:05,606 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:15:05,606 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:15:05,607 - INFO - Getting database configuration...
2025-07-22 22:15:05,607 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:15:05,607 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:15:05,607 - INFO - Using persistent storage configuration
2025-07-22 22:15:05,607 - INFO - Loading database config from: persistent_storage
2025-07-22 22:15:05,608 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:15:05,608 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:15:05,608 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:15:05,608 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:15:05,608 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:15:05,608 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:15:05,608 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:15:05,608 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:15:05,652 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:15:05,653 - INFO - Attempting MySQL connection...
2025-07-22 22:15:05,653 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:15:05,823 - INFO - MySQL connection successful!
2025-07-22 22:15:05,866 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:15:05,866 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:15:05,866 - INFO - Getting database configuration...
2025-07-22 22:15:05,867 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:15:05,867 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:15:05,867 - INFO - Using persistent storage configuration
2025-07-22 22:15:05,867 - INFO - Initializing content database...
2025-07-22 22:15:05,867 - INFO - Initializing content database connection...
2025-07-22 22:15:05,867 - INFO - Attempting to establish database connection...
2025-07-22 22:15:05,867 - INFO - Getting database configuration...
2025-07-22 22:15:05,868 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:15:05,868 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:15:05,868 - INFO - Using persistent storage configuration
2025-07-22 22:15:05,868 - INFO - Loading database config from: persistent_storage
2025-07-22 22:15:05,868 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:15:05,868 - INFO - Database configuration loaded successfully
2025-07-22 22:15:05,868 - INFO - ✅ Content database initialized successfully
2025-07-22 22:15:05,868 - INFO - ✅ Content database initialized successfully
2025-07-22 22:15:05,868 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:15:05,868 - INFO - ✅ Server startup complete
2025-07-22 22:15:05,871 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:15:05,903 - WARNING -  * Debugger is active!
2025-07-22 22:15:05,911 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:15:05,953 - INFO - 127.0.0.1 - - [22/Jul/2025 22:15:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:15:28,176 - INFO - 127.0.0.1 - - [22/Jul/2025 22:15:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:15:30,871 - INFO - 127.0.0.1 - - [22/Jul/2025 22:15:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:15:58,176 - INFO - 127.0.0.1 - - [22/Jul/2025 22:15:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:16:01,872 - INFO - 127.0.0.1 - - [22/Jul/2025 22:16:01] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:16:28,177 - INFO - 127.0.0.1 - - [22/Jul/2025 22:16:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:16:30,870 - INFO - 127.0.0.1 - - [22/Jul/2025 22:16:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:16:58,177 - INFO - 127.0.0.1 - - [22/Jul/2025 22:16:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:17:01,930 - INFO - 127.0.0.1 - - [22/Jul/2025 22:17:01] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:17:28,178 - INFO - 127.0.0.1 - - [22/Jul/2025 22:17:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:17:30,872 - INFO - 127.0.0.1 - - [22/Jul/2025 22:17:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:17:58,179 - INFO - 127.0.0.1 - - [22/Jul/2025 22:17:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:18:02,244 - INFO - 127.0.0.1 - - [22/Jul/2025 22:18:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:18:28,178 - INFO - 127.0.0.1 - - [22/Jul/2025 22:18:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:18:30,874 - INFO - 127.0.0.1 - - [22/Jul/2025 22:18:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:18:58,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:18:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:19:02,559 - INFO - 127.0.0.1 - - [22/Jul/2025 22:19:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:19:28,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:19:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:19:30,873 - INFO - 127.0.0.1 - - [22/Jul/2025 22:19:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:19:58,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:19:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:20:02,898 - INFO - 127.0.0.1 - - [22/Jul/2025 22:20:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:20:28,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:20:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:20:30,875 - INFO - 127.0.0.1 - - [22/Jul/2025 22:20:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:20:58,179 - INFO - 127.0.0.1 - - [22/Jul/2025 22:20:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:21:03,207 - INFO - 127.0.0.1 - - [22/Jul/2025 22:21:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:21:28,177 - INFO - 127.0.0.1 - - [22/Jul/2025 22:21:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:21:30,873 - INFO - 127.0.0.1 - - [22/Jul/2025 22:21:30] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:21:33,001] INFO in app: ✅ Character routes registered
2025-07-22 22:21:33,001 - INFO - ✅ Character routes registered
[2025-07-22 22:21:33,001] INFO in app: 🔧 Debug OAuth endpoints enabled
2025-07-22 22:21:33,001 - INFO - 🔧 Debug OAuth endpoints enabled
[2025-07-22 22:21:33,001] INFO in app: 🔧 Enhanced OAuth troubleshooting enabled
2025-07-22 22:21:33,001 - INFO - 🔧 Enhanced OAuth troubleshooting enabled
[2025-07-22 22:21:33,002] INFO in app: 🔧 OAuth production fix endpoints enabled
2025-07-22 22:21:33,002 - INFO - 🔧 OAuth production fix endpoints enabled
[2025-07-22 22:21:33,002] INFO in app: ✅ OAuth user accounts enabled
2025-07-22 22:21:33,002 - INFO - ✅ OAuth user accounts enabled
[2025-07-22 22:21:33,002] INFO in app: Running in LOCAL DEVELOPMENT environment
2025-07-22 22:21:33,002 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:21:33,002 - INFO - Running in LOCAL DEVELOPMENT environment
[2025-07-22 22:21:33,002] INFO in app: Configuring database for OAuth from DATABASE_URL
2025-07-22 22:21:33,002 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:21:33,002 - INFO - Configuring database for OAuth from DATABASE_URL
[2025-07-22 22:21:33,002] INFO in app: DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:21:33,002 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:21:33,002 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
[2025-07-22 22:21:33,002] INFO in app: Using PostgreSQL database for user accounts
2025-07-22 22:21:33,002 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:21:33,002 - INFO - Using PostgreSQL database for user accounts
[2025-07-22 22:21:33,002] INFO in app: DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:21:33,002 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:21:33,002 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
[2025-07-22 22:21:33,002] INFO in app: OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:21:33,002 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:21:33,002 - INFO - OAuth is enabled but no DATABASE_URL is set
[2025-07-22 22:21:33,002] INFO in app: Using file system for cache storage
2025-07-22 22:21:33,002 - INFO - Using file system for cache storage
2025-07-22 22:21:33,002 - INFO - Using file system for cache storage
2025-07-22 22:21:33,004 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:21:33,004 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:21:33,004 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:21:33,004 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:21:33,004 - INFO - Getting database configuration...
2025-07-22 22:21:33,004 - INFO - Getting database configuration...
2025-07-22 22:21:33,004 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:33,004 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:33,004 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:33,004 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:33,004 - INFO - Using persistent storage configuration
2025-07-22 22:21:33,004 - INFO - Using persistent storage configuration
2025-07-22 22:21:33,004 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:21:33,004 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:21:33,004 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:33,004 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:33,004 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:21:33,004 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:21:33,004 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:33,004 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
[2025-07-22 22:21:33,004] INFO in app: Database config manager initialized
2025-07-22 22:21:33,004 - INFO - Database config manager initialized
2025-07-22 22:21:33,004 - INFO - Database config manager initialized
2025-07-22 22:21:33,008 - INFO - Getting database configuration...
2025-07-22 22:21:33,008 - INFO - Getting database configuration...
2025-07-22 22:21:33,008 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:33,008 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:33,008 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:33,008 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:33,008 - INFO - Using persistent storage configuration
2025-07-22 22:21:33,008 - INFO - Using persistent storage configuration
2025-07-22 22:21:33,008 - INFO - Loading database config from: persistent_storage
2025-07-22 22:21:33,008 - INFO - Loading database config from: persistent_storage
2025-07-22 22:21:33,008 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:21:33,008 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:21:33,008 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:21:33,008 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:21:33,008 - INFO - Getting database configuration...
2025-07-22 22:21:33,008 - INFO - Getting database configuration...
2025-07-22 22:21:33,008 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:33,008 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:33,008 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:33,008 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:33,008 - INFO - Using persistent storage configuration
2025-07-22 22:21:33,008 - INFO - Using persistent storage configuration
2025-07-22 22:21:33,008 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:21:33,008 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:21:33,008 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:33,008 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:33,008 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:21:33,008 - INFO - Database configuration loaded from persistent storage
[2025-07-22 22:21:33,008] INFO in app: Database configuration changed, closing connection pool
2025-07-22 22:21:33,008 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:21:33,008 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:21:33,008 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:21:33,008 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:21:33,008 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:21:33,008 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:21:33,008 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:21:33,008 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:21:33,008 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:21:33,008 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:21:33,008 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:21:33,008 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:21:33,008 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:21:33,008 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:21:33,008 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:21:33,008 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:21:33,054 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:21:33,054 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:21:33,054 - INFO - Attempting MySQL connection...
2025-07-22 22:21:33,054 - INFO - Attempting MySQL connection...
2025-07-22 22:21:33,054 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:21:33,054 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:21:33,226 - INFO - MySQL connection successful!
2025-07-22 22:21:33,226 - INFO - MySQL connection successful!
2025-07-22 22:21:33,226 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:21:33,226 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:21:33,226 - INFO - Stats request for character 2453
2025-07-22 22:21:33,226 - INFO - Stats request for character 2453
2025-07-22 22:21:33,268 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:21:33,268 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:21:33,269 - ERROR - Database query failed: (1054, "Unknown column 'mr' in 'field list'")
2025-07-22 22:21:33,269 - ERROR - Database query failed: (1054, "Unknown column 'mr' in 'field list'")
2025-07-22 22:21:33,269 - ERROR - Error getting stats for character 2453: (1054, "Unknown column 'mr' in 'field list'")
2025-07-22 22:21:33,269 - ERROR - Error getting stats for character 2453: (1054, "Unknown column 'mr' in 'field list'")
2025-07-22 22:21:33,277 - ERROR - Full traceback: Traceback (most recent call last):
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py", line 659, in get_character_stats
    cursor.execute(char_query, (character_id,))
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/utils/query_tracker.py", line 25, in execute
    result = self.cursor.execute(query, params)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'mr' in 'field list'")

2025-07-22 22:21:33,277 - ERROR - Full traceback: Traceback (most recent call last):
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py", line 659, in get_character_stats
    cursor.execute(char_query, (character_id,))
  File "/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/utils/query_tracker.py", line 25, in execute
    result = self.cursor.execute(query, params)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 153, in execute
    result = self._query(query)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/cursors.py", line 322, in _query
    conn.query(q)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 825, in _read_query_result
    result.read()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/Users/rgagnier/Library/Python/3.9/lib/python/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'mr' in 'field list'")

2025-07-22 22:21:33,277 - ERROR - 📤 API Response: GET /api/characters/2453/stats → 500 | IP: 127.0.0.1
2025-07-22 22:21:33,277 - ERROR - 📤 API Response: GET /api/characters/2453/stats → 500 | IP: 127.0.0.1
2025-07-22 22:21:33,277 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 287.7488136291504ms - Error: None
2025-07-22 22:21:33,277 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 287.7488136291504ms - Error: None
2025-07-22 22:21:33,277 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 287.7488136291504ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:21:33,277 - ERROR - Endpoint failure: GET /api/characters/:id/stats - Status: 500 - Time: 287.7488136291504ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:21:33,277 - INFO - 127.0.0.1 - - [22/Jul/2025 22:21:33] "[35m[1mGET /api/characters/2453/stats HTTP/1.1[0m" 500 -
2025-07-22 22:21:33,277 - INFO - 127.0.0.1 - - [22/Jul/2025 22:21:33] "[35m[1mGET /api/characters/2453/stats HTTP/1.1[0m" 500 -
2025-07-22 22:21:50,636 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
2025-07-22 22:21:50,636 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:21:50,637 - INFO - Cleaning up resources...
2025-07-22 22:21:50,637 - INFO - Cleaning up resources...
2025-07-22 22:21:50,637 - INFO - HTTP session closed
2025-07-22 22:21:50,637 - INFO - HTTP session closed
2025-07-22 22:21:50,637 - INFO - Connection pool closed
2025-07-22 22:21:50,637 - INFO - Connection pool closed
2025-07-22 22:21:50,637 - INFO - Content database connections closed
2025-07-22 22:21:50,637 - INFO - Content database connections closed
2025-07-22 22:21:50,648 - INFO - Garbage collection completed
2025-07-22 22:21:50,648 - INFO - Garbage collection completed
2025-07-22 22:21:50,649 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:21:50,649 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:21:50,649 - INFO - Timeline data saved on shutdown
2025-07-22 22:21:50,649 - INFO - Timeline data saved on shutdown
2025-07-22 22:21:50,649 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:21:50,649 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:21:50,650 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:21:50,650 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:21:50,650 - INFO - Query tracking data saved on shutdown
2025-07-22 22:21:50,650 - INFO - Query tracking data saved on shutdown
2025-07-22 22:21:50,680 - INFO -  * Restarting with stat
2025-07-22 22:21:50,865 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:21:50,865 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:21:50,865 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:21:50,865 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:21:50,865 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:21:50,865 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:21:50,865 - INFO - Using file system for cache storage
2025-07-22 22:21:50,867 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:21:50,867 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:21:50,867 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:21:50,867 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:21:50,867 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:21:50,867 - INFO - Directory permissions: 0o40755
2025-07-22 22:21:50,867 - INFO - Directory writable: True
2025-07-22 22:21:50,867 - INFO - Getting database configuration...
2025-07-22 22:21:50,867 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:50,867 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:50,867 - INFO - Using persistent storage configuration
2025-07-22 22:21:50,867 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:21:50,867 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:50,867 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:21:50,867 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:50,867 - INFO - Database config manager initialized
2025-07-22 22:21:50,869 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:21:50,869 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:21:50,869 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:21:50,869 - INFO - Getting database configuration...
2025-07-22 22:21:50,869 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:50,869 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:50,869 - INFO - Using persistent storage configuration
2025-07-22 22:21:50,869 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:21:50,869 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:21:50,869 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:21:50,869 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:21:50,869 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:21:50,870 - INFO - Getting database configuration...
2025-07-22 22:21:50,870 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:50,870 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:50,870 - INFO - Using persistent storage configuration
2025-07-22 22:21:50,870 - INFO - Loading database config from: persistent_storage
2025-07-22 22:21:50,870 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:21:50,870 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:21:50,871 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:21:50,871 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:21:50,871 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:21:50,871 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:21:50,871 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:21:50,871 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:21:50,917 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:21:50,917 - INFO - Attempting MySQL connection...
2025-07-22 22:21:50,917 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:21:51,087 - INFO - MySQL connection successful!
2025-07-22 22:21:51,130 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:21:51,130 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:21:53,135 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:21:53,154 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:21:53,154 - INFO - Getting database configuration...
2025-07-22 22:21:53,154 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:53,154 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:53,155 - INFO - Using persistent storage configuration
2025-07-22 22:21:53,155 - INFO - Loading database config from: persistent_storage
2025-07-22 22:21:53,155 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:21:53,155 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:21:53,155 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:21:53,155 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:21:53,155 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:21:53,155 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:21:53,155 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:21:53,155 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:21:53,200 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:21:53,200 - INFO - Attempting MySQL connection...
2025-07-22 22:21:53,200 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:21:53,378 - INFO - MySQL connection successful!
2025-07-22 22:21:53,424 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:21:53,424 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:21:57,426 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:21:57,427 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:21:57,427 - INFO - Getting database configuration...
2025-07-22 22:21:57,427 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:57,427 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:57,427 - INFO - Using persistent storage configuration
2025-07-22 22:21:57,428 - INFO - Loading database config from: persistent_storage
2025-07-22 22:21:57,428 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:21:57,428 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:21:57,428 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:21:57,428 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:21:57,428 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:21:57,428 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:21:57,429 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:21:57,429 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:21:57,475 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:21:57,475 - INFO - Attempting MySQL connection...
2025-07-22 22:21:57,475 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:21:57,653 - INFO - MySQL connection successful!
2025-07-22 22:21:57,698 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:21:57,698 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:21:57,698 - INFO - Getting database configuration...
2025-07-22 22:21:57,699 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:57,699 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:57,699 - INFO - Using persistent storage configuration
2025-07-22 22:21:57,699 - INFO - Initializing content database...
2025-07-22 22:21:57,699 - INFO - Initializing content database connection...
2025-07-22 22:21:57,699 - INFO - Attempting to establish database connection...
2025-07-22 22:21:57,699 - INFO - Getting database configuration...
2025-07-22 22:21:57,699 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:21:57,699 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:21:57,699 - INFO - Using persistent storage configuration
2025-07-22 22:21:57,699 - INFO - Loading database config from: persistent_storage
2025-07-22 22:21:57,699 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:21:57,700 - INFO - Database configuration loaded successfully
2025-07-22 22:21:57,700 - INFO - ✅ Content database initialized successfully
2025-07-22 22:21:57,700 - INFO - ✅ Content database initialized successfully
2025-07-22 22:21:57,700 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:21:57,700 - INFO - ✅ Server startup complete
2025-07-22 22:21:57,702 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:21:57,736 - WARNING -  * Debugger is active!
2025-07-22 22:21:57,745 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:21:58,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:21:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:22:01,993 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/characters.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:22:01,995 - INFO - Cleaning up resources...
2025-07-22 22:22:01,995 - INFO - HTTP session closed
2025-07-22 22:22:01,995 - INFO - Connection pool closed
2025-07-22 22:22:01,995 - INFO - Content database connections closed
2025-07-22 22:22:02,001 - INFO - Garbage collection completed
2025-07-22 22:22:02,002 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:22:02,002 - INFO - Timeline data saved on shutdown
2025-07-22 22:22:02,002 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:22:02,002 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:22:02,002 - INFO - Query tracking data saved on shutdown
2025-07-22 22:22:02,023 - INFO -  * Restarting with stat
2025-07-22 22:22:02,204 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:22:02,204 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:22:02,204 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:22:02,204 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:22:02,204 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:22:02,204 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:22:02,204 - INFO - Using file system for cache storage
2025-07-22 22:22:02,206 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:22:02,206 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:22:02,206 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:22:02,206 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:22:02,206 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:22:02,206 - INFO - Directory permissions: 0o40755
2025-07-22 22:22:02,206 - INFO - Directory writable: True
2025-07-22 22:22:02,206 - INFO - Getting database configuration...
2025-07-22 22:22:02,206 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:02,206 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:02,206 - INFO - Using persistent storage configuration
2025-07-22 22:22:02,207 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:22:02,207 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:02,207 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:22:02,207 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:02,207 - INFO - Database config manager initialized
2025-07-22 22:22:02,209 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:22:02,209 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:22:02,209 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:22:02,209 - INFO - Getting database configuration...
2025-07-22 22:22:02,209 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:02,209 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:02,209 - INFO - Using persistent storage configuration
2025-07-22 22:22:02,209 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:22:02,209 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:02,209 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:22:02,209 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:22:02,209 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:22:02,209 - INFO - Getting database configuration...
2025-07-22 22:22:02,209 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:02,209 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:02,209 - INFO - Using persistent storage configuration
2025-07-22 22:22:02,209 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:02,209 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:02,209 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:02,210 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:02,210 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:02,210 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:02,210 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:02,210 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:02,210 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:03,128 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:03,128 - INFO - Attempting MySQL connection...
2025-07-22 22:22:03,128 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:03,303 - INFO - MySQL connection successful!
2025-07-22 22:22:03,347 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:22:03,348 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:22:05,353 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:22:05,353 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:22:05,353 - INFO - Getting database configuration...
2025-07-22 22:22:05,354 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:05,354 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:05,354 - INFO - Using persistent storage configuration
2025-07-22 22:22:05,354 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:05,354 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:05,354 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:05,355 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:05,355 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:05,355 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:05,355 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:05,355 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:05,355 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:05,399 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:05,399 - INFO - Attempting MySQL connection...
2025-07-22 22:22:05,399 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:05,570 - INFO - MySQL connection successful!
2025-07-22 22:22:05,612 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:22:05,613 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:22:09,618 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:22:09,618 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:22:09,618 - INFO - Getting database configuration...
2025-07-22 22:22:09,619 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:09,619 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:09,619 - INFO - Using persistent storage configuration
2025-07-22 22:22:09,619 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:09,619 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:09,619 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:09,619 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:09,619 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:09,619 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:09,619 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:09,619 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:09,620 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:09,665 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:09,665 - INFO - Attempting MySQL connection...
2025-07-22 22:22:09,665 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:09,835 - INFO - MySQL connection successful!
2025-07-22 22:22:09,878 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:22:09,879 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:22:09,879 - INFO - Getting database configuration...
2025-07-22 22:22:09,879 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:09,879 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:09,879 - INFO - Using persistent storage configuration
2025-07-22 22:22:09,879 - INFO - Initializing content database...
2025-07-22 22:22:09,879 - INFO - Initializing content database connection...
2025-07-22 22:22:09,880 - INFO - Attempting to establish database connection...
2025-07-22 22:22:09,880 - INFO - Getting database configuration...
2025-07-22 22:22:09,880 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:09,880 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:09,880 - INFO - Using persistent storage configuration
2025-07-22 22:22:09,880 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:09,880 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:09,880 - INFO - Database configuration loaded successfully
2025-07-22 22:22:09,880 - INFO - ✅ Content database initialized successfully
2025-07-22 22:22:09,880 - INFO - ✅ Content database initialized successfully
2025-07-22 22:22:09,880 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:22:09,880 - INFO - ✅ Server startup complete
2025-07-22 22:22:09,883 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:22:09,914 - WARNING -  * Debugger is active!
2025-07-22 22:22:09,921 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:22:09,963 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:09] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:22:18,170] INFO in app: ✅ Character routes registered
2025-07-22 22:22:18,170 - INFO - ✅ Character routes registered
[2025-07-22 22:22:18,170] INFO in app: 🔧 Debug OAuth endpoints enabled
2025-07-22 22:22:18,170 - INFO - 🔧 Debug OAuth endpoints enabled
[2025-07-22 22:22:18,170] INFO in app: 🔧 Enhanced OAuth troubleshooting enabled
2025-07-22 22:22:18,170 - INFO - 🔧 Enhanced OAuth troubleshooting enabled
[2025-07-22 22:22:18,171] INFO in app: 🔧 OAuth production fix endpoints enabled
2025-07-22 22:22:18,171 - INFO - 🔧 OAuth production fix endpoints enabled
[2025-07-22 22:22:18,171] INFO in app: ✅ OAuth user accounts enabled
2025-07-22 22:22:18,171 - INFO - ✅ OAuth user accounts enabled
[2025-07-22 22:22:18,171] INFO in app: Running in LOCAL DEVELOPMENT environment
2025-07-22 22:22:18,171 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:22:18,171 - INFO - Running in LOCAL DEVELOPMENT environment
[2025-07-22 22:22:18,171] INFO in app: Configuring database for OAuth from DATABASE_URL
2025-07-22 22:22:18,171 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:22:18,171 - INFO - Configuring database for OAuth from DATABASE_URL
[2025-07-22 22:22:18,171] INFO in app: DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:22:18,171 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:22:18,171 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
[2025-07-22 22:22:18,171] INFO in app: Using PostgreSQL database for user accounts
2025-07-22 22:22:18,171 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:22:18,171 - INFO - Using PostgreSQL database for user accounts
[2025-07-22 22:22:18,171] INFO in app: DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:22:18,171 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:22:18,171 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
[2025-07-22 22:22:18,171] INFO in app: OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:22:18,171 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:22:18,171 - INFO - OAuth is enabled but no DATABASE_URL is set
[2025-07-22 22:22:18,171] INFO in app: Using file system for cache storage
2025-07-22 22:22:18,171 - INFO - Using file system for cache storage
2025-07-22 22:22:18,171 - INFO - Using file system for cache storage
2025-07-22 22:22:18,174 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:22:18,174 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:22:18,174 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:22:18,174 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:22:18,174 - INFO - Getting database configuration...
2025-07-22 22:22:18,174 - INFO - Getting database configuration...
2025-07-22 22:22:18,174 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:18,174 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:18,174 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:18,174 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:18,174 - INFO - Using persistent storage configuration
2025-07-22 22:22:18,174 - INFO - Using persistent storage configuration
2025-07-22 22:22:18,174 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:22:18,174 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:22:18,174 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:18,174 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:18,174 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:22:18,174 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:22:18,174 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:18,174 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
[2025-07-22 22:22:18,174] INFO in app: Database config manager initialized
2025-07-22 22:22:18,174 - INFO - Database config manager initialized
2025-07-22 22:22:18,174 - INFO - Database config manager initialized
2025-07-22 22:22:18,177 - INFO - Getting database configuration...
2025-07-22 22:22:18,177 - INFO - Getting database configuration...
2025-07-22 22:22:18,177 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:18,177 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:18,177 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:18,177 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:18,177 - INFO - Using persistent storage configuration
2025-07-22 22:22:18,177 - INFO - Using persistent storage configuration
2025-07-22 22:22:18,177 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:18,177 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:18,177 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:18,177 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:18,177 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:22:18,177 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:22:18,177 - INFO - Getting database configuration...
2025-07-22 22:22:18,177 - INFO - Getting database configuration...
2025-07-22 22:22:18,177 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:18,177 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:18,177 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:18,177 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:18,177 - INFO - Using persistent storage configuration
2025-07-22 22:22:18,177 - INFO - Using persistent storage configuration
2025-07-22 22:22:18,177 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:22:18,177 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:22:18,177 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:18,177 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:22:18,177 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:22:18,177 - INFO - Database configuration loaded from persistent storage
[2025-07-22 22:22:18,177] INFO in app: Database configuration changed, closing connection pool
2025-07-22 22:22:18,177 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:22:18,177 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:22:18,177 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:18,177 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:18,177 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:18,177 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:18,177 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:18,177 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:18,177 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:18,177 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:18,178 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:18,178 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:18,178 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:18,178 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:18,178 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:18,178 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:18,221 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:18,221 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:18,221 - INFO - Attempting MySQL connection...
2025-07-22 22:22:18,221 - INFO - Attempting MySQL connection...
2025-07-22 22:22:18,221 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:18,221 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:18,396 - INFO - MySQL connection successful!
2025-07-22 22:22:18,396 - INFO - MySQL connection successful!
2025-07-22 22:22:18,396 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:22:18,396 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:22:18,396 - INFO - Stats request for character 2453
2025-07-22 22:22:18,396 - INFO - Stats request for character 2453
2025-07-22 22:22:18,440 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:22:18,440 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:22:18,485 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:22:18,485 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:22:18,485 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:22:18,485 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:22:18,486 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:18] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:22:18,486 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:18] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:22:26,412 - INFO - Getting database configuration...
2025-07-22 22:22:26,412 - INFO - Getting database configuration...
2025-07-22 22:22:26,412 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:26,412 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:22:26,412 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:26,412 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:22:26,413 - INFO - Using persistent storage configuration
2025-07-22 22:22:26,413 - INFO - Using persistent storage configuration
2025-07-22 22:22:26,413 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:26,413 - INFO - Loading database config from: persistent_storage
2025-07-22 22:22:26,413 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:26,413 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:22:26,413 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:26,413 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:22:26,413 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:26,413 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:22:26,413 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:26,413 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:22:26,413 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:26,413 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:22:26,413 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:26,413 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:22:26,413 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:26,413 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:22:26,413 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:26,413 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:22:26,456 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:26,456 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:22:26,456 - INFO - Attempting MySQL connection...
2025-07-22 22:22:26,456 - INFO - Attempting MySQL connection...
2025-07-22 22:22:26,456 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:26,456 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:22:26,627 - INFO - MySQL connection successful!
2025-07-22 22:22:26,627 - INFO - MySQL connection successful!
2025-07-22 22:22:26,627 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:22:26,627 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:22:26,627 - INFO - Stats request for character 302
2025-07-22 22:22:26,627 - INFO - Stats request for character 302
2025-07-22 22:22:26,670 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:22:26,670 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:22:26,713 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:22:26,713 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:22:26,714 - INFO - Enhanced stats for character 302: AC=670, ATK=30, Weight=1311, HP=7919+1885, MP=5302+1155, Resistances={'poison': 153, 'magic': 147, 'disease': 157, 'fire': 163, 'cold': 143, 'corrupt': 0}
2025-07-22 22:22:26,714 - INFO - Enhanced stats for character 302: AC=670, ATK=30, Weight=1311, HP=7919+1885, MP=5302+1155, Resistances={'poison': 153, 'magic': 147, 'disease': 157, 'fire': 163, 'cold': 143, 'corrupt': 0}
2025-07-22 22:22:26,714 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:26] "GET /api/characters/302/stats HTTP/1.1" 200 -
2025-07-22 22:22:26,714 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:26] "GET /api/characters/302/stats HTTP/1.1" 200 -
2025-07-22 22:22:28,178 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:22:28,178 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:22:30,872 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:22:30,872 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:22:58,179 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:22:58,179 - INFO - 127.0.0.1 - - [22/Jul/2025 22:22:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:03,352 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:03,352 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:08,265 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:23:08,265 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:23:08,266 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:23:08,266 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:23:08,266 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 363.91377449035645ms - Error: None
2025-07-22 22:23:08,266 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 363.91377449035645ms - Error: None
2025-07-22 22:23:08,266 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 363.91377449035645ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:23:08,266 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 363.91377449035645ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:23:08,267 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:08] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:23:08,267 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:08] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:23:11,598 - INFO - Getting database configuration...
2025-07-22 22:23:11,598 - INFO - Getting database configuration...
2025-07-22 22:23:11,599 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:11,599 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:11,599 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:11,599 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:11,599 - INFO - Using persistent storage configuration
2025-07-22 22:23:11,599 - INFO - Using persistent storage configuration
2025-07-22 22:23:11,599 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:11,599 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:11,599 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:11,599 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:11,600 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:11,600 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:11,601 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:11,601 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:11,602 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:11,602 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:11,602 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:11,602 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:11,602 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:11,602 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:11,602 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:11,602 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:11,602 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:11,602 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:11,648 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:11,648 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:11,648 - INFO - Attempting MySQL connection...
2025-07-22 22:23:11,648 - INFO - Attempting MySQL connection...
2025-07-22 22:23:11,648 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:11,648 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:11,820 - INFO - MySQL connection successful!
2025-07-22 22:23:11,820 - INFO - MySQL connection successful!
2025-07-22 22:23:11,821 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:11,821 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:11,867 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:23:11,867 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:23:11,869 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:11] "GET /api/characters/search?name=Valgor HTTP/1.1" 200 -
2025-07-22 22:23:11,869 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:11] "GET /api/characters/search?name=Valgor HTTP/1.1" 200 -
2025-07-22 22:23:13,138 - INFO - Getting database configuration...
2025-07-22 22:23:13,138 - INFO - Getting database configuration...
2025-07-22 22:23:13,139 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,139 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,139 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,139 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,139 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,139 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,139 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,139 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,140 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,140 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,140 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,140 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,141 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,141 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,141 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,141 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,141 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,141 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,141 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,141 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,141 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,141 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,141 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,141 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,186 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,186 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,186 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,186 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,186 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,186 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,356 - INFO - MySQL connection successful!
2025-07-22 22:23:13,356 - INFO - MySQL connection successful!
2025-07-22 22:23:13,357 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,357 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,400 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:23:13,400 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:23:13,402 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453 HTTP/1.1" 200 -
2025-07-22 22:23:13,402 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453 HTTP/1.1" 200 -
2025-07-22 22:23:13,407 - INFO - Getting database configuration...
2025-07-22 22:23:13,407 - INFO - Getting database configuration...
2025-07-22 22:23:13,410 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,410 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,410 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,410 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,410 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,410 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,411 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,411 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,411 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,411 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,411 - INFO - Getting database configuration...
2025-07-22 22:23:13,411 - INFO - Getting database configuration...
2025-07-22 22:23:13,411 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,411 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,411 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,411 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,411 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,411 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,411 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,411 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,412 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,412 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,412 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,412 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,412 - INFO - Getting database configuration...
2025-07-22 22:23:13,412 - INFO - Getting database configuration...
2025-07-22 22:23:13,412 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,412 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,412 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,412 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,412 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,412 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,412 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,412 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,412 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,412 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,412 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,412 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:23:13,412 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,412 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,412 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,412 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,412 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,412 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:23:13,413 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,413 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,413 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,413 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,413 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,413 - INFO - Using persistent storage configuration
2025-07-22 22:23:13,413 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,413 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,413 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,413 - INFO - Loading database config from: persistent_storage
2025-07-22 22:23:13,413 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,413 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,413 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,413 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:23:13,413 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,413 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,413 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,413 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:23:13,413 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,413 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,414 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,414 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:23:13,414 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,414 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:23:13,414 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,414 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:23:13,414 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,414 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:23:13,415 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,415 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:23:13,415 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,415 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:23:13,457 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,457 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,458 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,458 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,458 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,458 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,460 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,460 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,460 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,460 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,460 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,460 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,461 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,461 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:23:13,461 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,461 - INFO - Attempting MySQL connection...
2025-07-22 22:23:13,461 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,461 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:23:13,629 - INFO - MySQL connection successful!
2025-07-22 22:23:13,629 - INFO - MySQL connection successful!
2025-07-22 22:23:13,630 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,630 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,631 - INFO - MySQL connection successful!
2025-07-22 22:23:13,631 - INFO - MySQL connection successful!
2025-07-22 22:23:13,632 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,632 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,632 - INFO - MySQL connection successful!
2025-07-22 22:23:13,632 - INFO - MySQL connection successful!
2025-07-22 22:23:13,632 - INFO - Stats request for character 2453
2025-07-22 22:23:13,632 - INFO - Stats request for character 2453
2025-07-22 22:23:13,632 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,632 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:23:13,632 - INFO - Currency request for character 2453
2025-07-22 22:23:13,632 - INFO - Currency request for character 2453
2025-07-22 22:23:13,675 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:23:13,675 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:23:13,677 - ERROR - Direct query tracking failed: 'character_currency'
2025-07-22 22:23:13,677 - ERROR - Direct query tracking failed: 'character_currency'
2025-07-22 22:23:13,678 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:23:13,678 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:23:13,679 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453/currency HTTP/1.1" 200 -
2025-07-22 22:23:13,679 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453/currency HTTP/1.1" 200 -
2025-07-22 22:23:13,723 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:23:13,723 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:23:13,725 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:23:13,725 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:23:13,726 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:23:13,726 - INFO - Enhanced stats for character 2453: AC=766, ATK=30, Weight=679, HP=8402+2375, MP=0+1215, Resistances={'poison': 176, 'magic': 186, 'disease': 174, 'fire': 185, 'cold': 165, 'corrupt': 0}
2025-07-22 22:23:13,729 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453/inventory HTTP/1.1" 200 -
2025-07-22 22:23:13,729 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453/inventory HTTP/1.1" 200 -
2025-07-22 22:23:13,730 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:23:13,730 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:13] "GET /api/characters/2453/stats HTTP/1.1" 200 -
2025-07-22 22:23:28,177 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:28,177 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:30,874 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:30,874 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:58,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:23:58,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:23:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:03,796 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:03,796 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:03] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:28,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:28,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:30,874 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:30,874 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:58,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:24:58,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:24:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:04,247 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:04] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:04,247 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:04] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:28,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:28,180 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:30,875 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:30,875 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:58,181 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:25:58,181 - INFO - 127.0.0.1 - - [22/Jul/2025 22:25:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:04,714 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:04] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:04,714 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:04] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:28,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:28,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:30,876 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:30,876 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:26:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:26:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:05,184 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:05,184 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:28,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:28,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:30,877 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:30,877 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:27:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:27:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:05,628 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:05,628 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:28,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:28,182 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:30,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:30,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:28:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:28:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:06,123 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:06,123 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:28,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:28,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:30,879 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:30,879 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:58,185 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:29:58,185 - INFO - 127.0.0.1 - - [22/Jul/2025 22:29:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:06,132 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:06,132 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:28,184 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:28,184 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:30,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:30,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:30:58,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:30:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:06,149 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:06,149 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:28,187 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:28,187 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:30,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:30,878 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:58,184 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:31:58,184 - INFO - 127.0.0.1 - - [22/Jul/2025 22:31:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:06,644 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:06,644 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:06] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:28,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:28,183 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:30,880 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:30,880 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:58,185 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:32:58,185 - INFO - 127.0.0.1 - - [22/Jul/2025 22:32:58] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:07,144 - INFO - 127.0.0.1 - - [22/Jul/2025 22:33:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:07,144 - INFO - 127.0.0.1 - - [22/Jul/2025 22:33:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:28,187 - INFO - 127.0.0.1 - - [22/Jul/2025 22:33:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:28,187 - INFO - 127.0.0.1 - - [22/Jul/2025 22:33:28] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:30,879 - INFO - 127.0.0.1 - - [22/Jul/2025 22:33:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:30,879 - INFO - 127.0.0.1 - - [22/Jul/2025 22:33:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:33:58,129 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/app.py', reloading
2025-07-22 22:33:58,129 - INFO -  * Detected change in '/Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/app.py', reloading
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
[ADMIN MODULE] Performance metrics initialized for real data only
⚠️ File logging temporarily disabled for debugging
[BACKEND STARTUP] ENABLE_DEV_AUTH = NOT SET
[BACKEND STARTUP] Python: /Library/Developer/CommandLineTools/usr/bin/python3
[BACKEND STARTUP] CWD: /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend
✅ Loaded environment variables from .env file
🔐 Authentication required for protected routes
🔐 OAuth/User Accounts ENABLED
   - DEV_MODE_AUTH_BYPASS: False
   - GOOGLE_CLIENT_ID: SET
   - GOOGLE_CLIENT_SECRET: SET
   - OAUTH_REDIRECT_URI: http://localhost:3000/auth/callback
   - FRONTEND_URL: http://localhost:3000
   - JWT_SECRET_KEY: SET
   - DATABASE_URL: SET
   - Environment: Local Development
⚠️ File logging temporarily disabled for debugging
2025-07-22 22:33:58,132 - INFO - Cleaning up resources...
2025-07-22 22:33:58,132 - INFO - Cleaning up resources...
2025-07-22 22:33:58,132 - INFO - HTTP session closed
2025-07-22 22:33:58,132 - INFO - HTTP session closed
2025-07-22 22:33:58,132 - INFO - Connection pool closed
2025-07-22 22:33:58,132 - INFO - Connection pool closed
2025-07-22 22:33:58,132 - INFO - Content database connections closed
2025-07-22 22:33:58,132 - INFO - Content database connections closed
2025-07-22 22:33:58,140 - INFO - Garbage collection completed
2025-07-22 22:33:58,140 - INFO - Garbage collection completed
2025-07-22 22:33:58,140 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:33:58,140 - INFO - Timeline data saved to /Users/rgagnier/Documents/Github Projects/EQDataScraper/backend/routes/../data/timeline_data.json (36 entries)
2025-07-22 22:33:58,140 - INFO - Timeline data saved on shutdown
2025-07-22 22:33:58,140 - INFO - Timeline data saved on shutdown
2025-07-22 22:33:58,141 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:33:58,141 - INFO - Query metrics saved to data/query_tracking/query_metrics.json
2025-07-22 22:33:58,141 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:33:58,141 - INFO - Query timeline saved to data/query_tracking/query_timeline.json
2025-07-22 22:33:58,141 - INFO - Query tracking data saved on shutdown
2025-07-22 22:33:58,141 - INFO - Query tracking data saved on shutdown
2025-07-22 22:33:58,163 - INFO -  * Restarting with stat
[2025-07-22 22:33:58,423] WARNING in app: ⚠️ Could not load item routes: No module named 'utils.database'
2025-07-22 22:33:58,426 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:33:58,426 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:33:58,426 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:33:58,426 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:33:58,426 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:33:58,426 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:33:58,426 - INFO - Using file system for cache storage
2025-07-22 22:33:58,428 - INFO - Using simple database connection pool (no hanging issues)
2025-07-22 22:33:58,428 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:33:58,428 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:33:58,428 - INFO - Persistent config initialized. Data directory: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data
2025-07-22 22:33:58,428 - INFO - Config file path: /Users/rgagnier/Documents/Github Projects/EQDataScraper/.data/persistent_config.json
2025-07-22 22:33:58,428 - INFO - Directory permissions: 0o40755
2025-07-22 22:33:58,428 - INFO - Directory writable: True
2025-07-22 22:33:58,428 - INFO - Getting database configuration...
2025-07-22 22:33:58,429 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:33:58,429 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:33:58,429 - INFO - Using persistent storage configuration
2025-07-22 22:33:58,429 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:33:58,429 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:33:58,429 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:33:58,429 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:33:58,429 - INFO - Database config manager initialized
2025-07-22 22:33:58,431 - INFO - [MAIN BLOCK] ENABLE_DEV_AUTH = NOT SET
2025-07-22 22:33:58,431 - INFO - Initializing database connection on startup (attempt 1/3)...
2025-07-22 22:33:58,431 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:33:58,431 - INFO - Getting database configuration...
2025-07-22 22:33:58,431 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:33:58,431 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:33:58,431 - INFO - Using persistent storage configuration
2025-07-22 22:33:58,431 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:33:58,431 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:33:58,431 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:33:58,431 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:33:58,431 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:33:58,432 - INFO - Getting database configuration...
2025-07-22 22:33:58,432 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:33:58,432 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:33:58,432 - INFO - Using persistent storage configuration
2025-07-22 22:33:58,432 - INFO - Loading database config from: persistent_storage
2025-07-22 22:33:58,432 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:33:58,432 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:33:58,433 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:33:58,433 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:33:58,433 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:33:58,433 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:33:58,434 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:33:58,434 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:33:58,479 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:33:58,479 - INFO - Attempting MySQL connection...
2025-07-22 22:33:58,479 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:33:58,650 - INFO - MySQL connection successful!
2025-07-22 22:33:58,694 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:33:58,695 - INFO - ⏳ Retrying in 2 seconds...
2025-07-22 22:34:00,698 - INFO - Initializing database connection on startup (attempt 2/3)...
2025-07-22 22:34:00,698 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:34:00,699 - INFO - Getting database configuration...
2025-07-22 22:34:00,699 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:34:00,699 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:34:00,699 - INFO - Using persistent storage configuration
2025-07-22 22:34:00,699 - INFO - Loading database config from: persistent_storage
2025-07-22 22:34:00,699 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:34:00,700 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:34:00,700 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:34:00,700 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:34:00,700 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:34:00,700 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:34:00,700 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:34:00,700 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:34:00,745 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:34:00,746 - INFO - Attempting MySQL connection...
2025-07-22 22:34:00,746 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:34:00,917 - INFO - MySQL connection successful!
2025-07-22 22:34:00,960 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:34:00,960 - INFO - ⏳ Retrying in 4 seconds...
2025-07-22 22:34:04,966 - INFO - Initializing database connection on startup (attempt 3/3)...
2025-07-22 22:34:04,966 - INFO - Found database configuration from: persistent_storage
2025-07-22 22:34:04,966 - INFO - Getting database configuration...
2025-07-22 22:34:04,967 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:34:04,967 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:34:04,967 - INFO - Using persistent storage configuration
2025-07-22 22:34:04,967 - INFO - Loading database config from: persistent_storage
2025-07-22 22:34:04,967 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:34:04,968 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:34:04,968 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:34:04,968 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:34:04,968 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:34:04,968 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:34:04,968 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:34:04,968 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:34:05,014 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:34:05,015 - INFO - Attempting MySQL connection...
2025-07-22 22:34:05,015 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:34:05,191 - INFO - MySQL connection successful!
2025-07-22 22:34:05,235 - ERROR - ❌ Database connection test failed: 0
2025-07-22 22:34:05,236 - ERROR - ❌ Failed to establish database connection after 3 attempts
2025-07-22 22:34:05,236 - INFO - Getting database configuration...
2025-07-22 22:34:05,236 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:34:05,236 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:34:05,236 - INFO - Using persistent storage configuration
2025-07-22 22:34:05,236 - INFO - Initializing content database...
2025-07-22 22:34:05,236 - INFO - Initializing content database connection...
2025-07-22 22:34:05,236 - INFO - Attempting to establish database connection...
2025-07-22 22:34:05,236 - INFO - Getting database configuration...
2025-07-22 22:34:05,236 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:34:05,236 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:34:05,236 - INFO - Using persistent storage configuration
2025-07-22 22:34:05,236 - INFO - Loading database config from: persistent_storage
2025-07-22 22:34:05,236 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:34:05,236 - INFO - Database configuration loaded successfully
2025-07-22 22:34:05,236 - INFO - ✅ Content database initialized successfully
2025-07-22 22:34:05,236 - INFO - ✅ Content database initialized successfully
2025-07-22 22:34:05,236 - INFO - 🚫 Spell system disabled - skipping startup spell data preload
2025-07-22 22:34:05,236 - INFO - ✅ Server startup complete
2025-07-22 22:34:05,237 - INFO - Starting Flask server on port 5001 with threading enabled
2025-07-22 22:34:05,263 - WARNING -  * Debugger is active!
2025-07-22 22:34:05,273 - INFO -  * Debugger PIN: 871-508-735
2025-07-22 22:34:05,313 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:34:05,314 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:34:05,315 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:05] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:34:07,641 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:34:15,325 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:15] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:34:30,881 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:34:45,335 - INFO - 127.0.0.1 - - [22/Jul/2025 22:34:45] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:35:08,103 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:08] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:35:15,345 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:15] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:35:30,885 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:30] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:35:36,481] INFO in app: ✅ Character routes registered
2025-07-22 22:35:36,481 - INFO - ✅ Character routes registered
[2025-07-22 22:35:36,482] WARNING in app: ⚠️ Could not load item routes: No module named 'utils.database'
2025-07-22 22:35:36,482 - WARNING - ⚠️ Could not load item routes: No module named 'utils.database'
[2025-07-22 22:35:36,482] INFO in app: 🔧 Debug OAuth endpoints enabled
2025-07-22 22:35:36,482 - INFO - 🔧 Debug OAuth endpoints enabled
[2025-07-22 22:35:36,482] INFO in app: 🔧 Enhanced OAuth troubleshooting enabled
2025-07-22 22:35:36,482 - INFO - 🔧 Enhanced OAuth troubleshooting enabled
[2025-07-22 22:35:36,482] INFO in app: 🔧 OAuth production fix endpoints enabled
2025-07-22 22:35:36,482 - INFO - 🔧 OAuth production fix endpoints enabled
[2025-07-22 22:35:36,482] INFO in app: ✅ OAuth user accounts enabled
2025-07-22 22:35:36,482 - INFO - ✅ OAuth user accounts enabled
[2025-07-22 22:35:36,483] INFO in app: Running in LOCAL DEVELOPMENT environment
2025-07-22 22:35:36,483 - INFO - Running in LOCAL DEVELOPMENT environment
2025-07-22 22:35:36,483 - INFO - Running in LOCAL DEVELOPMENT environment
[2025-07-22 22:35:36,483] INFO in app: Configuring database for OAuth from DATABASE_URL
2025-07-22 22:35:36,483 - INFO - Configuring database for OAuth from DATABASE_URL
2025-07-22 22:35:36,483 - INFO - Configuring database for OAuth from DATABASE_URL
[2025-07-22 22:35:36,483] INFO in app: DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:35:36,483 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
2025-07-22 22:35:36,483 - INFO - DATABASE_URL starts with: postgresql://postgres:ggtLlgIc...
[2025-07-22 22:35:36,483] INFO in app: Using PostgreSQL database for user accounts
2025-07-22 22:35:36,483 - INFO - Using PostgreSQL database for user accounts
2025-07-22 22:35:36,483 - INFO - Using PostgreSQL database for user accounts
[2025-07-22 22:35:36,483] INFO in app: DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:35:36,483 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
2025-07-22 22:35:36,483 - INFO - DB_CONFIG set with host: shuttle.proxy.rlwy.net, database: railway
[2025-07-22 22:35:36,483] INFO in app: OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:35:36,483 - INFO - OAuth is enabled but no DATABASE_URL is set
2025-07-22 22:35:36,483 - INFO - OAuth is enabled but no DATABASE_URL is set
[2025-07-22 22:35:36,483] INFO in app: Using file system for cache storage
2025-07-22 22:35:36,483 - INFO - Using file system for cache storage
2025-07-22 22:35:36,483 - INFO - Using file system for cache storage
2025-07-22 22:35:36,485 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:35:36,485 - INFO - db_config_manager: Config is None, forcing load
2025-07-22 22:35:36,485 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:35:36,485 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:35:36,485 - INFO - Getting database configuration...
2025-07-22 22:35:36,485 - INFO - Getting database configuration...
2025-07-22 22:35:36,486 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:35:36,486 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:35:36,486 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:35:36,486 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:35:36,486 - INFO - Using persistent storage configuration
2025-07-22 22:35:36,486 - INFO - Using persistent storage configuration
2025-07-22 22:35:36,486 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:35:36,486 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:35:36,486 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:35:36,486 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:35:36,486 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:35:36,486 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:35:36,486 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:35:36,486 - INFO - db_config_manager: After load, config type: <class 'dict'>, keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
[2025-07-22 22:35:36,486] INFO in app: Database config manager initialized
2025-07-22 22:35:36,486 - INFO - Database config manager initialized
2025-07-22 22:35:36,486 - INFO - Database config manager initialized
2025-07-22 22:35:36,489 - INFO - Getting database configuration...
2025-07-22 22:35:36,489 - INFO - Getting database configuration...
2025-07-22 22:35:36,489 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:35:36,489 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:35:36,490 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:35:36,490 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:35:36,490 - INFO - Using persistent storage configuration
2025-07-22 22:35:36,490 - INFO - Using persistent storage configuration
2025-07-22 22:35:36,490 - INFO - Loading database config from: persistent_storage
2025-07-22 22:35:36,490 - INFO - Loading database config from: persistent_storage
2025-07-22 22:35:36,490 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:35:36,490 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:35:36,490 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:35:36,490 - INFO - db_config_manager: Attempting to load from persistent storage
2025-07-22 22:35:36,490 - INFO - Getting database configuration...
2025-07-22 22:35:36,490 - INFO - Getting database configuration...
2025-07-22 22:35:36,490 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:35:36,490 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:35:36,490 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:35:36,490 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:35:36,490 - INFO - Using persistent storage configuration
2025-07-22 22:35:36,490 - INFO - Using persistent storage configuration
2025-07-22 22:35:36,490 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:35:36,490 - INFO - db_config_manager: persistent_config.get_database_config() returned: <class 'dict'>
2025-07-22 22:35:36,490 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:35:36,490 - INFO - db_config_manager: Got config with keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'database_host', 'database_username', 'config_source']
2025-07-22 22:35:36,490 - INFO - Database configuration loaded from persistent storage
2025-07-22 22:35:36,490 - INFO - Database configuration loaded from persistent storage
[2025-07-22 22:35:36,490] INFO in app: Database configuration changed, closing connection pool
2025-07-22 22:35:36,490 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:35:36,490 - INFO - Database configuration changed, closing connection pool
2025-07-22 22:35:36,490 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:35:36,490 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:35:36,490 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:35:36,490 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:35:36,490 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:35:36,490 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:35:36,490 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:35:36,490 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:35:36,490 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:35:36,490 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:35:36,490 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:35:36,490 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:35:36,490 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:35:36,490 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:35:36,537 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:35:36,537 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:35:36,537 - INFO - Attempting MySQL connection...
2025-07-22 22:35:36,537 - INFO - Attempting MySQL connection...
2025-07-22 22:35:36,537 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:35:36,537 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:35:36,713 - INFO - MySQL connection successful!
2025-07-22 22:35:36,713 - INFO - MySQL connection successful!
2025-07-22 22:35:36,713 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:35:36,713 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:35:36,759 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:35:36,759 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:35:36,804 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:35:36,804 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:35:36,806 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:36] "GET /api/characters/2453/inventory HTTP/1.1" 200 -
2025-07-22 22:35:36,806 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:36] "GET /api/characters/2453/inventory HTTP/1.1" 200 -
2025-07-22 22:35:36,811 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:36] "OPTIONS /api/items/bulk HTTP/1.1" 200 -
2025-07-22 22:35:36,811 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:36] "OPTIONS /api/items/bulk HTTP/1.1" 200 -
2025-07-22 22:35:36,813 - WARNING - ❌ Method not allowed: POST /api/items/bulk (405 Method Not Allowed) | IP: 127.0.0.1 | User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.
2025-07-22 22:35:36,813 - WARNING - ❌ Method not allowed: POST /api/items/bulk (405 Method Not Allowed) | IP: 127.0.0.1 | User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.
2025-07-22 22:35:36,813 - WARNING - 📤 API Response: POST /api/items/bulk → 405 | IP: 127.0.0.1
2025-07-22 22:35:36,813 - WARNING - 📤 API Response: POST /api/items/bulk → 405 | IP: 127.0.0.1
2025-07-22 22:35:36,813 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.36978721618652344ms - Error: None
2025-07-22 22:35:36,813 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.36978721618652344ms - Error: None
2025-07-22 22:35:36,814 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.36978721618652344ms - Error: {
  "error": "Method not allowed",
  "message": "The method POST is not allowed for endpoint /api/items/bulk",
  "status_code": 405
}

2025-07-22 22:35:36,814 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.36978721618652344ms - Error: {
  "error": "Method not allowed",
  "message": "The method POST is not allowed for endpoint /api/items/bulk",
  "status_code": 405
}

2025-07-22 22:35:36,814 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:36] "[31m[1mPOST /api/items/bulk HTTP/1.1[0m" 405 -
2025-07-22 22:35:36,814 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:36] "[31m[1mPOST /api/items/bulk HTTP/1.1[0m" 405 -
2025-07-22 22:35:45,336 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:45] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:35:45,336 - INFO - 127.0.0.1 - - [22/Jul/2025 22:35:45] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:36:02,483] INFO in app: Connection cleanup completed successfully
2025-07-22 22:36:02,483 - INFO - Connection cleanup completed successfully
2025-07-22 22:36:02,483 - INFO - Connection cleanup completed successfully
2025-07-22 22:36:02,484 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:36:02,484 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:36:02,596 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:02,596 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:02,620 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:02,620 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:02,623 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:02,623 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:02,626 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "OPTIONS /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:36:02,626 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "OPTIONS /api/cleanup HTTP/1.1" 200 -
[2025-07-22 22:36:02,638] INFO in app: Connection cleanup completed successfully
2025-07-22 22:36:02,638 - INFO - Connection cleanup completed successfully
2025-07-22 22:36:02,638 - INFO - Connection cleanup completed successfully
2025-07-22 22:36:02,639 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:36:02,639 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:36:02,940 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:36:02,940 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:36:02,941 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:36:02,941 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:36:02,941 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 335.76011657714844ms - Error: None
2025-07-22 22:36:02,941 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 335.76011657714844ms - Error: None
2025-07-22 22:36:02,942 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 335.76011657714844ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:36:02,942 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 335.76011657714844ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:36:02,942 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:36:02,942 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:02] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:36:08,573 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:08] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:08,573 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:08] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:28,519 - INFO - Getting database configuration...
2025-07-22 22:36:28,519 - INFO - Getting database configuration...
2025-07-22 22:36:28,519 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:28,519 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:28,519 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:28,519 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:28,519 - INFO - Using persistent storage configuration
2025-07-22 22:36:28,519 - INFO - Using persistent storage configuration
2025-07-22 22:36:28,519 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:28,519 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:28,519 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:28,519 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:28,520 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:28,520 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:28,520 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:28,520 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:28,520 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:28,520 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:28,520 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:28,520 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:28,521 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:28,521 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:28,521 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:28,521 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:28,521 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:28,521 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:28,568 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:28,568 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:28,568 - INFO - Attempting MySQL connection...
2025-07-22 22:36:28,568 - INFO - Attempting MySQL connection...
2025-07-22 22:36:28,569 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:28,569 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:28,741 - INFO - MySQL connection successful!
2025-07-22 22:36:28,741 - INFO - MySQL connection successful!
2025-07-22 22:36:28,741 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:28,741 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:28,788 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:36:28,788 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:36:28,789 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:28] "GET /api/characters/search?name=Malevolent HTTP/1.1" 200 -
2025-07-22 22:36:28,789 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:28] "GET /api/characters/search?name=Malevolent HTTP/1.1" 200 -
2025-07-22 22:36:30,453 - INFO - Getting database configuration...
2025-07-22 22:36:30,453 - INFO - Getting database configuration...
2025-07-22 22:36:30,454 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,454 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,454 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,454 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,454 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,454 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,454 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,454 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,454 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,454 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,454 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,454 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,455 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,455 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,455 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,455 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,455 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,455 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,455 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,455 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,455 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,455 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,455 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,455 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,499 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,499 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,500 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,500 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,500 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,500 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,672 - INFO - MySQL connection successful!
2025-07-22 22:36:30,672 - INFO - MySQL connection successful!
2025-07-22 22:36:30,673 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,673 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,718 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:36:30,718 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:36:30,720 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:30] "GET /api/characters/302 HTTP/1.1" 200 -
2025-07-22 22:36:30,720 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:30] "GET /api/characters/302 HTTP/1.1" 200 -
2025-07-22 22:36:30,728 - INFO - Getting database configuration...
2025-07-22 22:36:30,728 - INFO - Getting database configuration...
2025-07-22 22:36:30,730 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,730 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,731 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,731 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,731 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,731 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,731 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,731 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,731 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,731 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,731 - INFO - Getting database configuration...
2025-07-22 22:36:30,731 - INFO - Getting database configuration...
2025-07-22 22:36:30,731 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,731 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,732 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,732 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,732 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,732 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,732 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,732 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,732 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,732 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,732 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,732 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,732 - INFO - Getting database configuration...
2025-07-22 22:36:30,732 - INFO - Getting database configuration...
2025-07-22 22:36:30,732 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,732 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,732 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,732 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,732 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,732 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:30,732 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,732 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,732 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,732 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:30,732 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,732 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,732 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,732 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,733 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,733 - INFO - Using persistent storage configuration
2025-07-22 22:36:30,733 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,733 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,733 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,733 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,733 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,733 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:30,733 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,733 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,733 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,733 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,733 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,733 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:30,733 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,733 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,733 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,733 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,733 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,733 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:30,733 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,733 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,733 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,733 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,734 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,734 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:30,734 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,734 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:30,734 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,734 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:30,734 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,734 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:30,734 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,734 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:30,734 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,734 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:30,779 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,779 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,779 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,779 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,779 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,779 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,779 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,779 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,779 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,779 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,779 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,779 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,780 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,780 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:30,780 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,780 - INFO - Attempting MySQL connection...
2025-07-22 22:36:30,780 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,780 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:30,882 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:30,882 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:30,951 - INFO - MySQL connection successful!
2025-07-22 22:36:30,951 - INFO - MySQL connection successful!
2025-07-22 22:36:30,951 - INFO - MySQL connection successful!
2025-07-22 22:36:30,951 - INFO - MySQL connection successful!
2025-07-22 22:36:30,951 - INFO - MySQL connection successful!
2025-07-22 22:36:30,951 - INFO - MySQL connection successful!
2025-07-22 22:36:30,951 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,951 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,951 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,951 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,951 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,951 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:30,951 - INFO - Currency request for character 302
2025-07-22 22:36:30,951 - INFO - Currency request for character 302
2025-07-22 22:36:30,952 - INFO - Stats request for character 302
2025-07-22 22:36:30,952 - INFO - Stats request for character 302
2025-07-22 22:36:30,995 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:36:30,995 - ERROR - Direct query tracking failed: 'character_data'
2025-07-22 22:36:30,995 - ERROR - Direct query tracking failed: 'character_currency'
2025-07-22 22:36:30,995 - ERROR - Direct query tracking failed: 'character_currency'
2025-07-22 22:36:30,997 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:30,997 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:30,997 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:30] "GET /api/characters/302/currency HTTP/1.1" 200 -
2025-07-22 22:36:30,997 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:30] "GET /api/characters/302/currency HTTP/1.1" 200 -
2025-07-22 22:36:31,046 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,046 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,047 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,047 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,047 - INFO - Enhanced stats for character 302: AC=670, ATK=30, Weight=1311, HP=7919+1885, MP=5302+1155, Resistances={'poison': 153, 'magic': 147, 'disease': 157, 'fire': 163, 'cold': 143, 'corrupt': 0}
2025-07-22 22:36:31,047 - INFO - Enhanced stats for character 302: AC=670, ATK=30, Weight=1311, HP=7919+1885, MP=5302+1155, Resistances={'poison': 153, 'magic': 147, 'disease': 157, 'fire': 163, 'cold': 143, 'corrupt': 0}
2025-07-22 22:36:31,049 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "GET /api/characters/302/inventory HTTP/1.1" 200 -
2025-07-22 22:36:31,049 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "GET /api/characters/302/inventory HTTP/1.1" 200 -
2025-07-22 22:36:31,049 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "GET /api/characters/302/stats HTTP/1.1" 200 -
2025-07-22 22:36:31,049 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "GET /api/characters/302/stats HTTP/1.1" 200 -
2025-07-22 22:36:31,071 - INFO - Getting database configuration...
2025-07-22 22:36:31,071 - INFO - Getting database configuration...
2025-07-22 22:36:31,071 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:31,071 - INFO - Loaded persistent config with 11 keys
2025-07-22 22:36:31,071 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:31,071 - INFO - Loaded persistent config keys: ['production_database_url', 'database_type', 'use_production_database', 'database_read_only', 'database_ssl', 'database_name', 'database_password', 'database_port', 'config_source', 'database_host', 'database_username']
2025-07-22 22:36:31,071 - INFO - Using persistent storage configuration
2025-07-22 22:36:31,071 - INFO - Using persistent storage configuration
2025-07-22 22:36:31,072 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:31,072 - INFO - Loading database config from: persistent_storage
2025-07-22 22:36:31,072 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:31,072 - INFO - Loaded database config: host=76.251.85.36, port=3306, db=peq, user=alla_view, ssl=True
2025-07-22 22:36:31,072 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:31,072 - INFO - Attempting MySQL connection to 76.251.85.36:3306
2025-07-22 22:36:31,073 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:31,073 - INFO - Socket address resolution successful: (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('76.251.85.36', 3306))
2025-07-22 22:36:31,073 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:31,073 - INFO - MySQL connection params - host type: <class 'str'>, host value: '76.251.85.36'
2025-07-22 22:36:31,073 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:31,073 - INFO - MySQL connection params - host length: 12, repr: '76.251.85.36'
2025-07-22 22:36:31,074 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:31,074 - INFO - MySQL connection params - port type: <class 'int'>, port value: 3306
2025-07-22 22:36:31,074 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:31,074 - WARNING - SSL requested but temporarily disabled for debugging
2025-07-22 22:36:31,074 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:31,074 - INFO - Testing direct socket connection before PyMySQL...
2025-07-22 22:36:31,119 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:31,119 - INFO - Direct socket connection successful to 76.251.85.36:3306
2025-07-22 22:36:31,119 - INFO - Attempting MySQL connection...
2025-07-22 22:36:31,119 - INFO - Attempting MySQL connection...
2025-07-22 22:36:31,119 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:31,119 - INFO - PyMySQL version: 1.4.6
2025-07-22 22:36:31,297 - INFO - MySQL connection successful!
2025-07-22 22:36:31,297 - INFO - MySQL connection successful!
2025-07-22 22:36:31,297 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:31,297 - INFO - Successfully connected to EQEmu database via main app
2025-07-22 22:36:31,346 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,346 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,393 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,393 - ERROR - Direct query tracking failed: 'inventory'
2025-07-22 22:36:31,399 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "GET /api/characters/302/inventory HTTP/1.1" 200 -
2025-07-22 22:36:31,399 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "GET /api/characters/302/inventory HTTP/1.1" 200 -
2025-07-22 22:36:31,408 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "OPTIONS /api/items/bulk HTTP/1.1" 200 -
2025-07-22 22:36:31,408 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "OPTIONS /api/items/bulk HTTP/1.1" 200 -
2025-07-22 22:36:31,410 - WARNING - ❌ Method not allowed: POST /api/items/bulk (405 Method Not Allowed) | IP: 127.0.0.1 | User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.
2025-07-22 22:36:31,410 - WARNING - ❌ Method not allowed: POST /api/items/bulk (405 Method Not Allowed) | IP: 127.0.0.1 | User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.
2025-07-22 22:36:31,411 - WARNING - 📤 API Response: POST /api/items/bulk → 405 | IP: 127.0.0.1
2025-07-22 22:36:31,411 - WARNING - 📤 API Response: POST /api/items/bulk → 405 | IP: 127.0.0.1
2025-07-22 22:36:31,411 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.7109642028808594ms - Error: None
2025-07-22 22:36:31,411 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.7109642028808594ms - Error: None
2025-07-22 22:36:31,411 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.7109642028808594ms - Error: {
  "error": "Method not allowed",
  "message": "The method POST is not allowed for endpoint /api/items/bulk",
  "status_code": 405
}

2025-07-22 22:36:31,411 - ERROR - Endpoint failure: POST /api/items/bulk - Status: 405 - Time: 0.7109642028808594ms - Error: {
  "error": "Method not allowed",
  "message": "The method POST is not allowed for endpoint /api/items/bulk",
  "status_code": 405
}

2025-07-22 22:36:31,411 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "[31m[1mPOST /api/items/bulk HTTP/1.1[0m" 405 -
2025-07-22 22:36:31,411 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:31] "[31m[1mPOST /api/items/bulk HTTP/1.1[0m" 405 -
2025-07-22 22:36:32,621 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:36:32,621 - INFO - 127.0.0.1 - - [22/Jul/2025 22:36:32] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:02,622 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:02] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:02,622 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:02] "GET /api/health HTTP/1.1" 200 -
[2025-07-22 22:37:07,701] INFO in app: Connection cleanup completed successfully
2025-07-22 22:37:07,701 - INFO - Connection cleanup completed successfully
2025-07-22 22:37:07,701 - INFO - Connection cleanup completed successfully
2025-07-22 22:37:07,703 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:37:07,703 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:37:07,797 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:07,797 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:07,818 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:07,818 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:07,823 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:07,823 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:07,825 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "OPTIONS /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:37:07,825 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "OPTIONS /api/cleanup HTTP/1.1" 200 -
[2025-07-22 22:37:07,833] INFO in app: Connection cleanup completed successfully
2025-07-22 22:37:07,833 - INFO - Connection cleanup completed successfully
2025-07-22 22:37:07,833 - INFO - Connection cleanup completed successfully
2025-07-22 22:37:07,834 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:37:07,834 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:07] "POST /api/cleanup HTTP/1.1" 200 -
2025-07-22 22:37:08,117 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:37:08,117 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:37:08,118 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:37:08,118 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:37:08,118 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 316.4970874786377ms - Error: None
2025-07-22 22:37:08,118 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 316.4970874786377ms - Error: None
2025-07-22 22:37:08,118 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 316.4970874786377ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:37:08,118 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 316.4970874786377ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:37:08,119 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:08] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:37:08,119 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:08] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:37:09,033 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:09] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:09,033 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:09] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:22,739 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:22] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:22,739 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:22] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:23,053 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:37:23,053 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:37:23,053 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:37:23,053 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:37:23,053 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 312.90388107299805ms - Error: None
2025-07-22 22:37:23,053 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 312.90388107299805ms - Error: None
2025-07-22 22:37:23,053 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 312.90388107299805ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:37:23,053 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 312.90388107299805ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:37:23,053 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:23] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:37:23,053 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:23] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:37:26,622 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:26] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:26,622 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:26] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:26,879 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:37:26,879 - ERROR - Error getting user main characters: relation "user_character_preferences" does not exist
LINE 5:                 FROM user_character_preferences
                             ^

2025-07-22 22:37:26,879 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:37:26,879 - ERROR - 📤 API Response: GET /api/user/characters/mains → 500 | IP: 127.0.0.1
2025-07-22 22:37:26,879 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 252.37298011779785ms - Error: None
2025-07-22 22:37:26,879 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 252.37298011779785ms - Error: None
2025-07-22 22:37:26,879 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 252.37298011779785ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:37:26,879 - ERROR - Endpoint failure: GET /api/user/characters/mains - Status: 500 - Time: 252.37298011779785ms - Error: {
  "error": "Internal server error"
}

2025-07-22 22:37:26,880 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:26] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:37:26,880 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:26] "[35m[1mGET /api/user/characters/mains HTTP/1.1[0m" 500 -
2025-07-22 22:37:30,882 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:30,882 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:30] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:56,631 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:56] "GET /api/health HTTP/1.1" 200 -
2025-07-22 22:37:56,631 - INFO - 127.0.0.1 - - [22/Jul/2025 22:37:56] "GET /api/health HTTP/1.1" 200 -
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/multiprocessing/resource_tracker.py:216: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/multiprocessing/resource_tracker.py:216: UserWarning: resource_tracker: There appear to be 1 leaked semaphore objects to clean up at shutdown
  warnings.warn('resource_tracker: There appear to be %d '
